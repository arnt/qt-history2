#############################################################################
# Makefile for building moc
# Generated by tmake at 07:47, 1999/01/12
#     Project: moc
#    Template: moc.t
#############################################################################

####### Compiler, tools and options

CC	=	cl
CXX	=	cl
CFLAGS	=	-nologo -O2
CXXFLAGS=	-nologo -O2
INCPATH	=	-I"..\..\include" -I"."
LINK	=	link
LFLAGS	=	/NOLOGO /SUBSYSTEM:console
LIBS	=	
MOC	=	moc

ZIP	=	zip -r -9

####### Files

HEADERS =	
SOURCES =	mocgen.cpp \
		..\tools\qbuffer.cpp \
		..\tools\qcollection.cpp \
		..\tools\qcstring.cpp \
		..\tools\qdatetime.cpp \
		..\tools\qdatastream.cpp \
		..\tools\qgarray.cpp \
		..\tools\qgdict.cpp \
		..\tools\qglist.cpp \
		..\tools\qglobal.cpp \
		..\tools\qgvector.cpp \
		..\tools\qiodevice.cpp \
		..\tools\qregexp.cpp \
		..\tools\qstring.cpp
OBJECTS =	mocgen.obj \
		qbuffer.obj \
		qcollection.obj \
		qcstring.obj \
		qdatetime.obj \
		qdatastream.obj \
		qgarray.obj \
		qgdict.obj \
		qglist.obj \
		qglobal.obj \
		qgvector.obj \
		qiodevice.obj \
		qregexp.obj \
		qstring.obj
SRCMOC	=	
OBJMOC	=	
DIST	=	
TARGET	=	moc.exe

####### Implicit rules

.SUFFIXES: .cpp .cxx .cc .c

.cpp.obj:
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -Fo$@ $<

.cxx.obj:
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -Fo$@ $<

.cc.obj:
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -Fo$@ $<

.c.obj:
	$(CC) -c $(CFLAGS) $(INCPATH) -Fo$@ $<

####### Build rules

all: $(TARGET)

$(TARGET): $(OBJECTS) $(OBJMOC) 
	$(LINK) $(LFLAGS) /OUT:$(TARGET) @<<
	    $(OBJECTS) $(OBJMOC) $(LIBS)
<<

moc: $(SRCMOC)

tmake: Makefile

Makefile: moc.pro
	tmake moc.pro -o Makefile

dist:
	$(ZIP) moc.zip moc.pro $(SOURCES) $(HEADERS) $(DIST)

clean:
	-del mocgen.obj
	-del qbuffer.obj
	-del qcollection.obj
	-del qcstring.obj
	-del qdatetime.obj
	-del qdatastream.obj
	-del qgarray.obj
	-del qgdict.obj
	-del qglist.obj
	-del qglobal.obj
	-del qgvector.obj
	-del qiodevice.obj
	-del qregexp.obj
	-del qstring.obj
	-del $(TARGET)

####### Compile

mocgen.obj: mocgen.cpp \
		..\..\include\qlist.h \
		..\..\include\qglist.h \
		..\..\include\qcollection.h \
		..\..\include\qglobal.h \
		..\..\include\qstring.h \
		..\..\include\qcstring.h \
		..\..\include\qarray.h \
		..\..\include\qgarray.h \
		..\..\include\qshared.h \
		..\..\include\qdatetime.h \
		lex.yy.c
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -Fomocgen.obj mocgen.cpp

qbuffer.obj: ..\tools\qbuffer.cpp \
		..\..\include\qbuffer.h \
		..\..\include\qiodevice.h \
		..\..\include\qglobal.h \
		..\..\include\qstring.h \
		..\..\include\qcstring.h \
		..\..\include\qarray.h \
		..\..\include\qgarray.h \
		..\..\include\qshared.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -Foqbuffer.obj ..\tools\qbuffer.cpp

qcollection.obj: ..\tools\qcollection.cpp \
		..\..\include\qcollection.h \
		..\..\include\qglobal.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -Foqcollection.obj ..\tools\qcollection.cpp

qcstring.obj: ..\tools\qcstring.cpp \
		..\..\include\qstring.h \
		..\..\include\qcstring.h \
		..\..\include\qarray.h \
		..\..\include\qgarray.h \
		..\..\include\qshared.h \
		..\..\include\qglobal.h \
		..\..\include\qregexp.h \
		..\..\include\qdatastream.h \
		..\..\include\qiodevice.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -Foqcstring.obj ..\tools\qcstring.cpp

qdatetime.obj: ..\tools\qdatetime.cpp \
		..\..\include\qdatetime.h \
		..\..\include\qstring.h \
		..\..\include\qcstring.h \
		..\..\include\qarray.h \
		..\..\include\qgarray.h \
		..\..\include\qshared.h \
		..\..\include\qglobal.h \
		..\..\include\qdatastream.h \
		..\..\include\qiodevice.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -Foqdatetime.obj ..\tools\qdatetime.cpp

qdatastream.obj: ..\tools\qdatastream.cpp \
		..\..\include\qdatastream.h \
		..\..\include\qiodevice.h \
		..\..\include\qglobal.h \
		..\..\include\qstring.h \
		..\..\include\qcstring.h \
		..\..\include\qarray.h \
		..\..\include\qgarray.h \
		..\..\include\qshared.h \
		..\..\include\qbuffer.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -Foqdatastream.obj ..\tools\qdatastream.cpp

qgarray.obj: ..\tools\qgarray.cpp \
		..\..\include\qgarray.h \
		..\..\include\qshared.h \
		..\..\include\qglobal.h \
		..\..\include\qstring.h \
		..\..\include\qcstring.h \
		..\..\include\qarray.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -Foqgarray.obj ..\tools\qgarray.cpp

qgdict.obj: ..\tools\qgdict.cpp \
		..\..\include\qgdict.h \
		..\..\include\qlist.h \
		..\..\include\qglist.h \
		..\..\include\qcollection.h \
		..\..\include\qglobal.h \
		..\..\include\qstring.h \
		..\..\include\qcstring.h \
		..\..\include\qarray.h \
		..\..\include\qgarray.h \
		..\..\include\qshared.h \
		..\..\include\qdatastream.h \
		..\..\include\qiodevice.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -Foqgdict.obj ..\tools\qgdict.cpp

qglist.obj: ..\tools\qglist.cpp \
		..\..\include\qglist.h \
		..\..\include\qcollection.h \
		..\..\include\qglobal.h \
		..\..\include\qgvector.h \
		..\..\include\qdatastream.h \
		..\..\include\qiodevice.h \
		..\..\include\qstring.h \
		..\..\include\qcstring.h \
		..\..\include\qarray.h \
		..\..\include\qgarray.h \
		..\..\include\qshared.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -Foqglist.obj ..\tools\qglist.cpp

qglobal.obj: ..\tools\qglobal.cpp \
		..\..\include\qglobal.h \
		..\..\include\qdict.h \
		..\..\include\qgdict.h \
		..\..\include\qlist.h \
		..\..\include\qglist.h \
		..\..\include\qcollection.h \
		..\..\include\qstring.h \
		..\..\include\qcstring.h \
		..\..\include\qarray.h \
		..\..\include\qgarray.h \
		..\..\include\qshared.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -Foqglobal.obj ..\tools\qglobal.cpp

qgvector.obj: ..\tools\qgvector.cpp \
		..\..\include\qgvector.h \
		..\..\include\qcollection.h \
		..\..\include\qglobal.h \
		..\..\include\qglist.h \
		..\..\include\qstring.h \
		..\..\include\qcstring.h \
		..\..\include\qarray.h \
		..\..\include\qgarray.h \
		..\..\include\qshared.h \
		..\..\include\qdatastream.h \
		..\..\include\qiodevice.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -Foqgvector.obj ..\tools\qgvector.cpp

qiodevice.obj: ..\tools\qiodevice.cpp \
		..\..\include\qiodevice.h \
		..\..\include\qglobal.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -Foqiodevice.obj ..\tools\qiodevice.cpp

qregexp.obj: ..\tools\qregexp.cpp \
		..\..\include\qregexp.h \
		..\..\include\qstring.h \
		..\..\include\qcstring.h \
		..\..\include\qarray.h \
		..\..\include\qgarray.h \
		..\..\include\qshared.h \
		..\..\include\qglobal.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -Foqregexp.obj ..\tools\qregexp.cpp

qstring.obj: ..\tools\qstring.cpp \
		..\..\include\qstring.h \
		..\..\include\qcstring.h \
		..\..\include\qarray.h \
		..\..\include\qgarray.h \
		..\..\include\qshared.h \
		..\..\include\qglobal.h \
		..\..\include\qregexp.h \
		..\..\include\qdatastream.h \
		..\..\include\qiodevice.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -Foqstring.obj ..\tools\qstring.cpp


####### Lex/yacc programs and options

LEX	=	flex
YACC	=	byacc -d

####### Lex/yacc files

LEXIN	=	moc.l
LEXOUT  =	lex.yy.c
YACCIN	=	moc.y
YACCOUT =	y.tab.c
YACCHDR =	y.tab.h
MOCGEN  =	mocgen.cpp

####### Process lex/yacc files

$(LEXOUT): $(LEXIN)
	$(LEX) $(LEXIN)

$(MOCGEN): $(YACCIN) $(LEXOUT)
	$(YACC) $(YACCIN)
	-del $(MOCGEN)
	-ren $(YACCOUT) $(MOCGEN)
