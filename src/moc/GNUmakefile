#############################################################################
# Makefile for building moc
# Generated by tmake at 16:28, 1999/02/08
#     Project: moc
#    Template: moc.t
#############################################################################

####### Compiler, tools and options

CC	=	gcc
CXX	=	g++
CFLAGS	=	-pipe -O2 -fno-strength-reduce
CXXFLAGS=	-pipe -O2 -fno-strength-reduce
INCPATH	=	-I../../include -I.
LINK	=	g++
LFLAGS	=	
LIBS	=	
MOC	=	moc

TAR	=	tar -cf
GZIP	=	gzip -9f

####### Files

HEADERS =	
SOURCES =	mocgen.cpp \
		../tools/qbuffer.cpp \
		../tools/qcollection.cpp \
		../tools/qcstring.cpp \
		../tools/qdatetime.cpp \
		../tools/qdatastream.cpp \
		../tools/qfile.cpp \
		../tools/qgarray.cpp \
		../tools/qgdict.cpp \
		../tools/qglist.cpp \
		../tools/qglobal.cpp \
		../tools/qgvector.cpp \
		../tools/qiodevice.cpp \
		../tools/qregexp.cpp \
		../tools/qstring.cpp \
		../tools/qtextcodec.cpp
OBJECTS =	mocgen.o \
		qbuffer.o \
		qcollection.o \
		qcstring.o \
		qdatetime.o \
		qdatastream.o \
		qfile.o \
		qgarray.o \
		qgdict.o \
		qglist.o \
		qglobal.o \
		qgvector.o \
		qiodevice.o \
		qregexp.o \
		qstring.o \
		qtextcodec.o
SRCMOC	=	
OBJMOC	=	
DIST	=	
TARGET	=	moc

####### Implicit rules

.SUFFIXES: .cpp .cxx .cc .C .c

.cpp.o:
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o $@ $<

.cxx.o:
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o $@ $<

.cc.o:
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o $@ $<

.C.o:
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o $@ $<

.c.o:
	$(CC) -c $(CFLAGS) $(INCPATH) -o $@ $<

####### Build rules

all: $(TARGET)

$(TARGET): $(OBJECTS) $(OBJMOC) 
	$(LINK) $(LFLAGS) -o $(TARGET) $(OBJECTS) $(OBJMOC) $(LIBS)

moc: $(SRCMOC)

tmake: GNUmakefile

GNUmakefile: moc.pro
	tmake moc.pro -o GNUmakefile

dist:
	$(TAR) moc.tar moc.pro $(SOURCES) $(HEADERS) $(DIST)
	$(GZIP) moc.tar

clean:
	-rm -f $(OBJECTS) $(OBJMOC) $(SRCMOC) $(TARGET)
	-rm -f *~ core

####### Compile

mocgen.o: mocgen.cpp
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o mocgen.o mocgen.cpp

qbuffer.o: ../tools/qbuffer.cpp \
		../tools/qbuffer.h \
		../tools/qiodevice.h \
		../tools/qglobal.h \
		../tools/qstring.h \
		../tools/qcstring.h \
		../tools/qarray.h \
		../tools/qgarray.h \
		../tools/qshared.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o qbuffer.o ../tools/qbuffer.cpp

qcollection.o: ../tools/qcollection.cpp \
		../tools/qcollection.h \
		../tools/qglobal.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o qcollection.o ../tools/qcollection.cpp

qcstring.o: ../tools/qcstring.cpp \
		../tools/qstring.h \
		../tools/qcstring.h \
		../tools/qarray.h \
		../tools/qgarray.h \
		../tools/qshared.h \
		../tools/qglobal.h \
		../tools/qregexp.h \
		../tools/qdatastream.h \
		../tools/qiodevice.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o qcstring.o ../tools/qcstring.cpp

qdatetime.o: ../tools/qdatetime.cpp \
		../tools/qdatetime.h \
		../tools/qstring.h \
		../tools/qcstring.h \
		../tools/qarray.h \
		../tools/qgarray.h \
		../tools/qshared.h \
		../tools/qglobal.h \
		../tools/qdatastream.h \
		../tools/qiodevice.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o qdatetime.o ../tools/qdatetime.cpp

qdatastream.o: ../tools/qdatastream.cpp \
		../tools/qdatastream.h \
		../tools/qiodevice.h \
		../tools/qglobal.h \
		../tools/qstring.h \
		../tools/qcstring.h \
		../tools/qarray.h \
		../tools/qgarray.h \
		../tools/qshared.h \
		../tools/qbuffer.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o qdatastream.o ../tools/qdatastream.cpp

qfile.o: ../tools/qfile.cpp \
		../tools/qfile.h \
		../tools/qiodevice.h \
		../tools/qglobal.h \
		../tools/qstring.h \
		../tools/qcstring.h \
		../tools/qarray.h \
		../tools/qgarray.h \
		../tools/qshared.h \
		../tools/qfiledefs.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o qfile.o ../tools/qfile.cpp

qgarray.o: ../tools/qgarray.cpp \
		../tools/qgarray.h \
		../tools/qshared.h \
		../tools/qglobal.h \
		../tools/qstring.h \
		../tools/qcstring.h \
		../tools/qarray.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o qgarray.o ../tools/qgarray.cpp

qgdict.o: ../tools/qgdict.cpp \
		../tools/qgdict.h \
		../tools/qlist.h \
		../tools/qglist.h \
		../tools/qcollection.h \
		../tools/qglobal.h \
		../tools/qstring.h \
		../tools/qcstring.h \
		../tools/qarray.h \
		../tools/qgarray.h \
		../tools/qshared.h \
		../tools/qdatastream.h \
		../tools/qiodevice.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o qgdict.o ../tools/qgdict.cpp

qglist.o: ../tools/qglist.cpp \
		../tools/qglist.h \
		../tools/qcollection.h \
		../tools/qglobal.h \
		../tools/qgvector.h \
		../tools/qdatastream.h \
		../tools/qiodevice.h \
		../tools/qstring.h \
		../tools/qcstring.h \
		../tools/qarray.h \
		../tools/qgarray.h \
		../tools/qshared.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o qglist.o ../tools/qglist.cpp

qglobal.o: ../tools/qglobal.cpp \
		../tools/qglobal.h \
		../tools/qdict.h \
		../tools/qgdict.h \
		../tools/qlist.h \
		../tools/qglist.h \
		../tools/qcollection.h \
		../tools/qstring.h \
		../tools/qcstring.h \
		../tools/qarray.h \
		../tools/qgarray.h \
		../tools/qshared.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o qglobal.o ../tools/qglobal.cpp

qgvector.o: ../tools/qgvector.cpp \
		../tools/qgvector.h \
		../tools/qcollection.h \
		../tools/qglobal.h \
		../tools/qglist.h \
		../tools/qstring.h \
		../tools/qcstring.h \
		../tools/qarray.h \
		../tools/qgarray.h \
		../tools/qshared.h \
		../tools/qdatastream.h \
		../tools/qiodevice.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o qgvector.o ../tools/qgvector.cpp

qiodevice.o: ../tools/qiodevice.cpp \
		../tools/qiodevice.h \
		../tools/qglobal.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o qiodevice.o ../tools/qiodevice.cpp

qregexp.o: ../tools/qregexp.cpp \
		../tools/qregexp.h \
		../tools/qstring.h \
		../tools/qcstring.h \
		../tools/qarray.h \
		../tools/qgarray.h \
		../tools/qshared.h \
		../tools/qglobal.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o qregexp.o ../tools/qregexp.cpp

qstring.o: ../tools/qstring.cpp \
		../tools/qstring.h \
		../tools/qcstring.h \
		../tools/qarray.h \
		../tools/qgarray.h \
		../tools/qshared.h \
		../tools/qglobal.h \
		../tools/qregexp.h \
		../tools/qdatastream.h \
		../tools/qiodevice.h \
		../tools/qtextcodec.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o qstring.o ../tools/qstring.cpp

qtextcodec.o: ../tools/qtextcodec.cpp \
		../tools/qlist.h \
		../tools/qglist.h \
		../tools/qcollection.h \
		../tools/qglobal.h \
		../tools/qtextcodec.h \
		../tools/qstring.h \
		../tools/qcstring.h \
		../tools/qarray.h \
		../tools/qgarray.h \
		../tools/qshared.h \
		../tools/qfile.h \
		../tools/qiodevice.h \
		../tools/qstrlist.h \
		../tools/qdatastream.h
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o qtextcodec.o ../tools/qtextcodec.cpp


####### Lex/yacc programs and options

LEX	=	flex
YACC	=	yacc -d

####### Lex/yacc files

LEXIN	=	moc.l
LEXOUT  =	lex.yy.c
YACCIN	=	moc.y
YACCOUT =	y.tab.c
YACCHDR =	y.tab.h
MOCGEN  =	mocgen.cpp

####### Process lex/yacc files

$(LEXOUT): $(LEXIN)
	$(LEX) $(LEXIN)

$(MOCGEN): $(YACCIN) $(LEXOUT)
	$(YACC) $(YACCIN)
	-rm -f $(MOCGEN)
	-mv $(YACCOUT) $(MOCGEN)
