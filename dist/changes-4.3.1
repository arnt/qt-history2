Qt 4.3.1 is a bug-fix release. It maintains both forward and backward
compatibility (source and binary) with Qt 4.3.0.

The Qt version 4.3 series is binary compatible with the 4.2.x, 4.1.x and
4.0.x series. Applications compiled for Qt 4.0, 4.1 or 4.2 will continue to
run with Qt 4.3.

****************************************************************************
*                           General                                        *
****************************************************************************

General Improvements
--------------------

- Translations
    * Updated the German translation to provide complete coverage of Qt.

- QDBusView
    * Now has an icon for Mac OS X and Windows.

- Intel C++ Compiler for Linux
    * Added support for version 10 of the compiler. See the compiler
      notes documentation for known problems and work-arounds for this
      compiler.
    * Added linux-icc-32 mkspec, for building with the 32-bit compiler
      on 64-bit hosts.

Third party components
----------------------

- FreeType
    * Security fix (CVE-2007-2754): Integer overflow in the TT_Load_Simple_Glyph
      function in freetype 2.3.4 and earlier allows remote authenticated users
      users to execute arbitrary code via crafted BDF fonts.

- SQLite
    * File descriptors are not inherited during spawn() anymore.

****************************************************************************
*                           Library                                        *
****************************************************************************

General Improvements
--------------------

- QAbstractItemView
    * [166605] Fixed regression causing keyboard modifiers to have no effect during
               drag-and-drop.
    * [169233] DoubleSpinBox would not get its text selected when being edited.
    * [168917] Text would sometimes not be selected in the editor.

- QAbstractItemModel
    * [166714] Fixed regression causing persistent indexes to not be correctly updated.

- QAbstractPrintDialog
    * [163000] Fixed bug on unix where PrintSelection option would not be
               enabled unless PrintPageRange was enabled.

- QApplication
    * [166677] Windows only: Fixed an issue with alert() where windows
      would keep flashing after beeing activated by the user.
    * [168974] Fixed compilation when QT3_SUPPORT and QT_NO_CURSOR are defined.

- QDesktopServices
   * [165817] Fixed misleading documentation of QDesktopServices::setUrlHandler().

- QFile
   * [167217] Fix regression when reopening a file; the sequential bit was not reset.

- QFileDialog:
   * [164947] Mac only: Activate the parent of a native sheet dialog before showing the sheet

- QFSFileEngine:
   * [163406] Ensure that QFile::readLine() works on all platforms when QFile is opened on FD 0.

- QGLWidget
    * [162085] X11 only: Fixed usage of QGLWidget on multiple X11 screens.
    * [164707] X11 only: Fixed the transparent overlay color usage to make
	       it possible to draw with a solid black color. Qt::transparent
	       is now always returned as the transparent color in an overlay.
    * [162143] Fixed a crash when calling renderPixmap() with insanely large
	       sizes. It now gracefully fails instead.

- QGraphicsItem
    * [163430] Improved precision of QGraphicsItem::ItemIsMovable move operations,
               and fixed move support for QGraphicsItem::ItemIgnoresTransformations.

- QGraphicsItemAnimation
    * [164585] Fixed setTimeLine(0) to properly remove the existing timeline, and also
               ensure that setting the same timeline twice works fine.

- QGraphicsScene
    * [163555] Flat items (items whose bounding rect width or height is 0) no longer
               cause a full viewport update when updating.

- QGraphicsView
    * [160828] Fixed bug in QGraphicsScene/View::render() which could cause
               nothing to be rendered for QPicture target devices.
    * [163919] Scrollbar ranges are no longer reset to (0,0) when the scrollbars are
               disabled (Qt::ScrollBarAlwaysOff).
    * [163537] Scrollbar ranges are now correct also for styles with a viewport frame
               only around the viewport itself (e.g., Motif & Mac OS X style).
    * [158245] Calling setScene(0) now recalculates the scrollbar ranges.
    * [170619] [157400] Fixed rendering bugs when using a semi-transparent foreground
               or background brush.
    * [170619] [168885] Fixed a bug where the rubber band would appear after invoking
               a context menu.

- QHostInfo
    * [168233] Terminate all pending lookups on application exit to avoid a delayed
               app shutdown while waiting for the lookups to complete.
    * [167487] Fix support for Unix platforms that allow IPv6 looksup through getaddrinfo(),
               but that don't support IPv6 sockets.

- QImage
    * [163727] Fixed artifacts in scaled images when using Qt::FastTransformation.
    * [169908] Fixed a crash when reading 4bit uncompressed BMP images.

- QMainWindow

    * [166004], [167651] Make the unified toolbar handle layout requests.
    * Mac only: Don't move the window's titlebar when clicking on the toolbar button.
    * [164105] Make the unified toolbar handles showMaximized().
    * [162555] Move OpenGL contexts when the toolbar button is pressed and we 
               are using the unified toolbar.

- QMenu
    * [166652] Fixed a regression where context menus could not be triggered with
               the right mouse button.
    * [161789] Fixed tear-off handle not being activated when dragging down from the
               menu bar item.

- QMenuBar
    * [168892] Fixed bug that made the extension always appear when adding a separator
               to a menu bar.
    * [166181] Fixed bug that made the extension be misplaced.
    * [166242] Fixed bug which would cause the menus to be collapsed.

- QMessageBox
    * Don't lose the default button when we change the modality of the messagebox.

- QMacStyle
    * Make sure that items with State_Focus actually get the focus ring drawn.

- QNetworkProxy
    * [170549] Fixed a regression from 4.2.3 in the default constructor; if used
               before any other proxy settings were applied, it would fail to
               initialize the proxy handlers, effectively disabling support for
               SOCKS5 and HTTP proxies.

- QOpenGLPaintEngine
    * [166087] Fixed a memory leak caused by not releasing GL program handles
	       if they failed to compile.
    * [166054] Push and pop the texture matrix stack and the client state
	       attributes when begin()/end().
    * [161021] Fixed drawing points with a cosmetic pen with a width > 0.

- QPainter
    * [158815] Fixed rendering artifacts for extended composition modes with
               semitransparent or antialiased drawing.
    * [163744] Fixed aliased ellipse drawing artifacts (horizontal lines)
               in raster engine.
    * [166623] Fixed bug where gradients with ObjectBoundingMode would be
               drawn at an incorrect offset.
    * [167497] Fixed color bleeding artifacts at edges when drawing
               images/pixmaps with SmoothPixmapTransform on X11.
    * [168621] Fixed bug which would cause projective transformations to be
               incorrectly applied for non-top-level widgets.
    * [168623] Fixed drawing of gradients with projective transformations.
    * [167891] Fixed an assert in QBezier::shifted() that occured when
	       drawing certain paths.

- QPlastiqueStyle
	* [167145] Fixed a regression with combo and spin box text margins.

- QPrintDialog
    X11 only:
    * [142701] X11 only: Fixed an assert  which occured on a system with
	       CUPS setup, but no printers available.
    * [165957] X11 only: Added support for picking printers from the
	       NPRINTER and NGPRINTER enviroment variables.
	       Don't use CUPS commandline options when not using CUPS.
    * [158807] Fixed page ordering when printing to a CUPS printer, and
	       .pdf files.
    * [155129] Fixed Landscape printing with CUPS version < 1.2.

    Windows only:
    * [166054] Windows only: Fixed a crash which occured when trying to
	       use a QPrintDialog to configure a printer set to use
	       QPrinter::PostScriptFormat as output format.
    * [162729] Windows only: Fixed an assert that occured when entering
	       an invalid page range.

- QPrintEngine
    * [166499] Windows only: Printing from a QTextEdit gave wrong results
	       under certain circumstances.
    * [161915] Mac only: Drawing vertial lines with a dot pattern work on OS X 10.3.9 now.

- QProcess
    * [161944] QProcess::setReadChannel() no longer affects the contents of the
               stderr / stdout / unget buffers. QProcess::readAllStandardError() and
               QProcess::readAllStandardOutput() no longer clear any unget data
               or buffered data.

- QPixmap
    * [167841] Fixed bug where filling a QPixmap with an alpha color would
               fail to detach the pixmap, causing copies of the pixmap to
               be changed as well.
    * [157166] X11 only: Fixed disappearing icons on 8 bit TrueColor displays.
    * [161307] Mac only: Drawing bitmaps on pixmaps now works correctly.

- QRasterPaintEngine
    * [166710] Qt::OpaqueMode wasn't taken into account under certain
	       circumstances when QPainter::fillRect() was called.
    * [159538] Fixed drawing of a mono image into another mono image.

- QRegion
    * [167445] Removed potential assert in QRegion::operator^ on unix.

- QScriptEngine
    * [165899] Fixed bug where calling an overloaded slot from a script
               would pick the wrong overload when the argument is a QObject.
    * [166903] Fixed crash when evaluating a call to a script function that
               ends with an if-statement with a true-part that ends with a
               return statement (and has no else-part).

- QScrollArea
    * [167838] Use micro focus rectangle (if "active") instead of the entire widget
               in ensureWidgetVisible().

- QSortFilterProxyModel
    * [167273] Fixed regression that caused QSortFilterProxyModel to assert when
               changing data in a QSqlTableModel source model with edit strategy
               OnFieldChange.

- QSqlQueryModel
    * [166880] Fixed a bug where setQuery() could cause a crash by calling hasFeature()
               on the wrong driver instance.

- QSqlRelationalTableModel
    * [140782] Fixed a bug which caused insertRecord() to fail when record()
               returns a record containing duplicate field names.

- QSslCertificate
    * [168116] Don't crash when passing 0 to QSslCertificate::fromDevice(); issue a
               warning instead. This fix also removes warnings about uninitialised
               symbol when accessing the static functions in QSslCertificate before
               creating a QSslSocket.

- QSslSocket
    * [164356] Fixed a crash when passing a string to setCiphers().
    * [166633] Fixed a memory leak for each established connection.
    * [165962] Fixed support for wildcard certificates.
    * [167593] QSslSocket::protocol() was sometimes ignored and defaulted to SSLv3.
    * [167380] Fixed a crash when assigning a null key for SSL servers.
    * [169571] Fixed a crash after a remote disconnect.

- QTcpSocket
    * [169183] Removed a qWarning() when reading from a closed socket
               (regression from 4.2.3).

- QTemporaryFile
    * [167565] Fixed a regression from 4.2.3; size() would always return 0.

- QTextEdit
    * [161577] Fixed regression causing Shift-Backspace to be ignored.
    * [165833] Fixed floating point overflow causing incorrect page heights
               for text documents.
    * [167377] Fixed performance regression when appending a lot of text in
               NoWrap line break mode when there is a horizontal scrollbar.

- QTextDocument
    * [160631] Fixed missing HTML export of page break policies.
    * [163258] Fixed bug causing text table borders to not be drawn in
               QLabels and tooltips.
    * [166670] Fixed layouting bug causing the right margin property of
               paragraphs inside table cells to be ignored.
    * [168406] Fixed rendering bug which would cause incorrect background
               fills for paragraphs with a left margin set.

- QTextLayout
    * [166083] Fixed incorrect line breaking when breaking at a tab character.

- QUrl
    * Fixed a bug in QUrl::clear(), which left some internal data uncleared.

- QWidget
    * [165177] Fixed crash when deleting a focus widget from a window with a non-null parent.

- QWindowsVistaStyle
	* [162730] Fixed incorrect font for item views on Windows Vista.
	* [157324] More native appearence for indeterminate progress bars.
	* [170012] Fixed the bug which caused busy mode not to work when range & 
                   value were both set to zero.

- QWindowsXPStyle
	* [132695] Fixed a crash issue occuring after multiple system theme changes.

- QWizard
    * [159684] AeroStyle: Fixed bug causing the minimum height to be set too low.
    * [161670] AeroStyle: Fixed problem with titlebar buttons remaining glowing after
               the mouse had left.
    * [161678] AeroStyle: Fixed incorrect vertical center alignment problem of wizard
               buttons.

- Q3ListViewItem
    * [165853] Fixed background coloring of a cell.

- Q3Socket
    * [163563] Fixed regression in canReadLine(); it now properly searches all internal
               buffers.

- Q3Table
    * [168497] Fixed bad update on Q3Table when using setUpdatesEnabled.

- Q3Wizard
    * [168195] Fixed bug causing the wrong page to be shown upon reopening the wizard.


****************************************************************************
*                          Database Drivers                                *
****************************************************************************

- Interbase driver
    * [149761] Added support for compiling Firebird 2.0 on 64-bit platforms.
    * [165423] Fixed a regression causing an assert when calling a stored procedure
               without out-parameters.
    * [166238] Fixed a bug causing only the first segment of multi-segmented
               BLOBs being retrieved in some cases.

- ODBC driver
    * [167167] Fixed a regression causing a crash when checking DBMS general
               information when connecting to a database.
    
- SQLite driver
    * Use new sqlite3_prepare16_v2 instead of sqlite3_prepare16 when possible.
    * [167665] Fixed a regression causing field names to be escaped multiple times
               when selecting from views.
    
****************************************************************************
*                               Examples                                   *
****************************************************************************

- Secure Socket Client
    * New example
    
- Accelerated Screen Driver
    * Don't crash if unable to get pointer to the frame buffer.

****************************************************************************
*                      Platform Specific Changes                           *
****************************************************************************

X11
---

    * [163862] Fixed a bug where QClipboard would escape all non-ASCII
      characters that were copied from GTK+ applications
    * [165182] Fixed building with the Intel C++ Compiler for Linux on
      IA-64 (Itanium) (missing functions in qatomic_ia64.h)
   * [163861] Fixed building on AIX 5.3 where the
     _POSIX_MONOTONIC_CLOCK macro was accidentally redefined.
    * [166650] Fixed a regression from 4.2.3 where calling
      QWidget::move() in a reimplementation of QWidget::showEvent()
      did not work.
    * [166097] QWidget::show() no longer overwrites the _NET_WM_STATE
      property. Instead, QWidget now merges any existing _NET_WM_STATE
      property together with its own state.
    * Fixed the QAtomic implementation on the Alpha, which previously
      caused all applications to hang on startup.
    * [165229] Changed the linux-lsb-g++ to not link with libGLU
      (which is not part of the LSB specification).

Windows
-------

    * [169105] Fixed a regression where calling resize() on a
      minimized window did not work.
    * [169376] Fixed a race condition that would cause a crash when
      stopping timers in a thread.

Mac OS X
--------

    * QMake's Xcode generator is now more robust determining which version of Xcode projects it
      should generate. It also uses launch services to determine Xcode's location as well.
    * Small changes to be more Leopard compatible
    * [167020] The translations are really included in the binary package now.
    * [164530] Make sure that the DPI for fonts don't change when the resolution changes.
    * [165530] Fixed a bug that caused Q_DECLARE_METATYPE() in a
      precompiled header to interfere with the Objective-C 'id' keyword


****************************************************************************
*                   Important Behavior Changes
****************************************************************************

- QScrollArea
    * [167838] Use micro focus rectangle (if "active") instead of the entire widget
               in ensureWidgetVisible().

