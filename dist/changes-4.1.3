Qt 4.1.3 is a bug-fix release. It maintains both forward and backward
compatibility (source and binary) with Qt 4.1.0.

The Qt version 4.1 series is binary compatible with the 4.0.x series.
Applications compiled for 4.0 will continue to run with 4.1.

#################################
# TODO: 2006/01/25 - 2006/04/11 #
# Last change: 214471
#################################p

****************************************************************************
*                           General                                        *
****************************************************************************

Meta Object Compiler (moc)

Configure / Compilation
	Compile with NAS sound support enabled and no Qt 3 support.
	Fixed some issues with resolving absolute paths when configuring 
	Qt using "-prefix".

Porting (qt3to4)
	qt3to4 now adds the needed include directive for 
	qPixmapFromMimeFactory().
	Added rule for QDeepCopy.
	Improved handling of files with non-unix line endings.
	
Qt Designer
	Improved usability by letting the Find Icon dialog remember the last
	path visited.
	Fixed preview of DataTime and Date types.
	Generate correct .ui code when saving forms containing Q3DateEdit, 
	Q3TimeEdit, Q3ProgressBar and Q3TextBrowser.
	Fixed cursor position when editing text in QListWidget and QComboBox.
	Fixed code generation for custom widgets containing a QComboBox.
	Fixed but that prevented the windowTitle property for QDockWidgets from
	being designable.
	Fixed problem where designer would fail reflect QTreeWidget column changes.
	Fixed potential assert when font size is specified in points.
	Fixed potential crash when breaking the layout of an empty splitter.
	Ensure that designer saves the used pixmap function.
	
Qt Assistant 
	Assistant now sets the proper encoding attribute when saving files,
	solving problems when viewing the page in some browsers.
	Improved window placement on startup.

Qt Linguist / Internationalization
	Improved window placement on startup.
	Fixed problem where .ts files for Qt3 .ui files would be grayed out.

uic
	Fix code generating bug for forms in namepsaces preventing connections
	from beeing made.
	Split large generated strings to avoid compiler errors.

Qt Translation

Demos / Examples
	Fixed a bug in the Tooltips example when moving the cursor from one 
	circle to the next.
	Fixed a bug in the FTP example which caused the Download button to be
	incorrectly enabled/disabled.
	Fixed a crash in the FTP example.
	Made it easier to change the Arthur Widget properties in Designer.
	Fixed indexing issues in the spreadsheet demo.

****************************************************************************
*                          Library                                         *
****************************************************************************

General improvements
--------------------

- Fixed rendering of some GIF images.
- Popup and Tool widgets are now correctly blocked by a sibling modal dialog.
- Group-leader widgets are no longer blocked by non-child modal widgets.
- A parent modal dialog of a child modal dialog can no longer be brought on top of the child.
- Make sure modal widgets are modal when opened on a closing parent.
- Fix expose painting error when closing a child popup.
- Ensure that index widget pointers are maintained when a view is sorted.
- Ensure that closingDown() returns true when the application 
  objects are being destroyed.
- Fixed a potential crash in the PNG image handler.

- Q3DockWindow
	Fixed placement when showing after being hidden.
	Fixed issue where calling show() on a hidden Q3DockWindow would make the 
	dockwindow overlap the existing one.
	
- Q3GroupBox
	Removed empty row at the bottom.

- Q3TextBrowser
	Fix bug that preventend some Unicode HTML files from beeing displayed.

- Q3ToolBar
	Ensure that toolbar separators are painted in all styles.

- Q3IconView
	Fixed a crash when disabling the view while an item is being edited.

- Q3ListView
	Fixed incorrect background color.
	Fixed painting issues with disabled items.
	Added support for tooltips.

- Q3Table
	Fixed a painting bug in the headers that occurred when a cell was
	selected.
	Ensure that checkbox backgrounds are filled.
	Fixed issue where calling selectRow() would not deselect current row 
	in SingeRow selection mode.
	
- Q3Header
	Fixed incorrect vertical text alignment.
	Fixed issue where a header label would be lost after swapping two column headers.
	
- Q3UrlOperator
	Fixed listChildren() for the case when setProtocol() haven't been 
	called.

- Q3WhatsThis
	Proper handling of dynamic what's this texts.

- QAbstractItemView
	Fixed QStatusTipEvents for itemviews.
	Fixed a crash occurring when removing a row in a slot connected to
	selectionChanged().
	Fixed issue where itemChanged() would be emitted twice.
	Fixed issue where input methods would not work on editable itemviews.
	Fixed potential crash.
	Make sure the editor does not open when expanding and collapsing branches
	in QTreeView. Note that this change introduces a system dependent delay to 
	differentiate between double and single clicks.
	
- QAbstractSocket
	Fix potential crash when connecting to local sockets on BSD systems.

- QCheckBox
	Only emit the stateChanged() signal when the state actually change.

- QComboBox
	Correct escape of '&' in items.
	Reset input context when showing the popup.

- QCommonStyle
	Fixed incorrect values returned from sizeHintFromContents() for the header
	sections.
	
- QCheckBox
	Fixed some painting issues when using CDE of Motif style.

- QDatabase
 	Fixed bool values in prepared values in the MYSQL driver.
	Fixed use of stored procedures that returns a result set in MySQL 5.x.
	Fixed queries on tables with a LONG field type in Orcle databases.
	Fixed reading of large blobs from an Interbase database.
	Fixed binding of OUT values.

- QDir
	Fix infinite loop in rename() if renaming a directory without write permission.

- QDirModel
	Fixed possible assert on broken links.
	Fix bug preventing links to "/" on Unix system from working correctly.

- QFile
	Correct error reporting on flush() and close().
	Fix caching issues causing wrong file sizes to be returned in some cases.
	Ensure that QFile::write will fail when trying to write to a full disk.
	
- QFileDialog
	Fixed a bug that allowed selection of multiple files in 
	getOpenFileName().
	Give proper error message when deleting a directory failed.
	Fix bug preventing update when changing the FileMode.
	Added support for using several new characters, such as @{},*~^ in dialog file filters.
	
- QFtp
	Fix crash if FTP session got deleted in slot.

- QGridLayout
	All addWidget() functions now invalidates the layout.
	Fix minimum size for layouts that contains widgets that have height-for-width.

- QGroupBox
	Fixed some painting issues appearing on all styles except WindowsXP.
	Fixed keyboard handling if checkable.

- QHeaderView
	Fixed a bug preventing tooltips to be shown.
	Fixed a painting error occuring when the sort indicator was enabled
	and the column width got less than the indicator.
	Fixed a usability issue when resizing a small headers in a fixed 
	width QTreeWidget.
	Ensure correct size when the font change.
	Fixed a painting error when the header was hidden.
	Fixed a painting error when the user activated the context menu while
	pressing the left mouse key.
	Fixed bug giving the last section a resize cursor event though it cannot be resized.
	Icons in header views now respect the layout direction.
	
- QImage
	Fixed writing to a PNG file when the alpha value is premultiplied.
	Fixed a bug where dotsPermMeter was not preserved after 
	convertToFormat().

- QIODevice
	Fixed return values for Qt3 support members getch(), putch() and 
	ungetch().

- QImage
	Handle out of memory conditions gracefully.

- QItemDelegate
	Proper painting in inactive windows.

- QItemSelectionModel
	Emit currentChanged() when the current item is deleted.
	Fixed a bug causing the selection to be lost when an item was removed.

- QLibrary
	Added support for suffixes before library extensions.
	
- QListView
	Fixed setRowHidden().
	Made descision of showing scrollbars independent of previous scrollbar
	state.

- QLocale
	Fix bug causing toString() to return the wrong day of week in some cases.

- QMainWindow
	Fixed a crash when deleting QMainWindow::statusBar().
	Fixed bug causing wrong behavior when removing a QToolBar with removeToolBar()
	Fixed layout error when showing the status bar after the mainwindow.
	Fixed incorrect assert in QMainWindowLayout::dockWidgetArea().
	Fixed a bug making it impossible to have a dockwidget under two others in the 
	same dockwidget area.
	
- QMenu
	Let setActiveAction open a submenu to be consistent with QMenuBar.
	Let the Alt key close a context menu.
	Improve navigation behavior when using Home/End.  
	Improve navigation behavior when using up/down arrow on a menu with no 
	selected items.
	Fix crash when clicking on cleared disabled submenus.
	Ensured that only the currently highlighted submenu is visible.

- QMotifStyle
	Draw QSlider tick marks.

- QMovie
	Improve frame delay calculations.

- QObject
	Fixed a crash when calling disconnect() on the last connection. 

- QPainter
	Optimized drawing of dotted lines.
	Fixed potential assert after calling setClipping(true).
	
- QPainter
	Fix bug causing contains(QPoint) to return the wrong answer in some cases.
	Fixed some painting issues with drawArc().

- QPen
	Fixed bug that caused wrong dash patterns to be drawn when changing style.

- QPicture
	Fixed a DPI issue when drawing into a QLabel.
	Make sure that the bounding rect is updated for all drawing operations.
	Make sure SVG files saved by QPicture includes namespace bindings in the SVG tag.
	
- QPlastiqueStyle
	Improved usability in QSlider by making the hit rectangle for mouse
	clicks wider. 
	Fixed animation of indeterminate progress bars.
	Draw lines for the hierarchal relationships in QTreeWidgets.

- QPrinter
	Optimized the size of PDF documents containing the same picture on 
	several places.
	Correctly handle systems with high resolution.

- QPrintDialog
	Fixed a crash when opening a page setup dialog on a PDF printer.

- QPushButton
	Make sure a pushbutton with flat property paints buttoncontents.
	
- QProcess
	exitStatus is now reset after a sub-process crash.
	Fix bug causing the system to lock on X11 after calling startDetached() 65536 times.

- QScrollArea
	Fixed problem where focusing the next child in a scroll area would make the 
	top left part of the child scroll out of view.
	
- QSettings
	Make it possible to the the "Default" registry entry on windows.

- QSortFilterProxyModel
	Fixed a crash when deleting rows.

- QStandardItemModel 
	Make sure the columnCount is updated after calling reomveColumn.	

- QSplashScreen
	Made sure the font set with setFont() is actually used.

- QSqlRelationalTableModel
	Inserting using the OnManualSubmit edit strategy failed in some cases.
	Fix removeColumn() for columns that contain relations.

- QSqlTableModel
	Make the OnFieldChange edit stragy behave like OnFieldChange when inserting
	rows. 

- QStackedLayout
	Fixed a bug causing a focus change when calling removeWidget().

- QSvgRenderer
	Fixed rendering into a QPicture.
	Fixed issue where id attributes containing certain characters would 
	not render correctly.

- QSplashScreen
	Fixed rendering of pixmaps with alpha channels.

- QSqlRelationalTableModel
	Fix mixed-case field names for relations.

- QSqlTableModel
	Fixed a bug preventing setting the value 'false' on a field of bool
	type.

- QTabBar
	Only emit currentChanged() when the current index actually changes.

- QTabWidget
	Ensure that QTabWidget has the same behaviour as QStackedWidget when inserting 
	a page at index <= currentIndex().
	
- QTableView
	Fixed selection after rows/columns have been moved.
	Made descision of showing scrollbars independent of previous scrollbar
	state.
 	Fixed a bug causing mouse clicks to be lost.
	Fixed potential assertion when hiding columns in QTableView.

- QTabWidget
	Fixed drawing of icons.

- QTextCodec
	Fixed detection of locales with the '@' modifier.

- QTextDocumentLayout
	Make sure the right margin of a QTextBlock is filled with the background color.
	
- QTextEdit
	Fixed a bug causing setPlainText() to emit textChanged() three times.
	Fixed an infinte loop triggered if calling setHtml() inside 
	resizeEvent().
	Support pasting text with '\r' line feeds.
	Fixed a bug causing tables loaded from HTML to be saved incorrectly.
	Made it possible to delete images using backspace.
	
- QTextBrowser
	Fixed incorrect mouse cursor after right-clicking a link.
	Fixed incorrect mouse cursor in read only mode.
	Fixed issue where arrow cursor would override custom cursors.
	Fixed potential crash when inserting HTML.
	
- QTreeWidget
 	Fix bug where itemChanged() to be emitted with a null pointer.

- QTreeWidgetItemIterator
	Fixed incorrect assert when created around an empty QTreeWidget.
	
- QToolTip
	Enable word breaking in rich-text tooltips.

- QTextStream
	Fixed a bug causing aboutToClose() to be connected to a NULL slot
	after calling unsetDevice().

- QTreeView
	Fixed some drag and drop issues.
	Fixed a bug where the checkState of an item was unchanged after an
	itemClicked() signal was emitted.
	Made descision of showing scrollbars independent of previous scrollbar
	state.
	Fixed a bug causing horizontal scrolling when it only should scroll
	vertically.
	Fix Parent-child relation decoration painting error.
	Fix scrollbar visibility bug.	
	Fix branch indicator painting error in right-to-left mode.
	Fixed painting issues when using reverse layout on hidden headers.

- QTreeWidget
	Fixed selection after sortItems().

- QUdpSocket
	Fixed issue where unbuffered sockets would continuously emit readyRead().
	
- QUrl
	Fixed setPort() with given -1 as port number.
	setEncodedUrl() now escapes '[' and ']' after the host in tolerantMode

- QUtf16Codec
	Fix bug in covertFromUnicode() on big-endian machines.

- QVariant
	Proper handling of variants of type "QList<QVariant>".

- QWidget
	Make sure application does not close if a widget with a visible parent exists.
	Fixed issue where QWidget::scroll() would scroll child widgets in some cases.
	Fixed painting issues when resizing very large child widgets.
	
- QWorkSpace
	Set the correct position when maximizing a child with the NoBorder 
	hint.
	Fix MDI titlebar text wrapping in Plastique style.
	Fixed some painting issues when resizing child windows.
	
Platform-Specific changes
-------------------------

Windows:

- Use correct default font on Windows 2000 and later versions. This
  also fixes issues with international characters on some systems.

- Calling showMaximixed() on a QDialog without minimize nor maximize buttons
  now behaves properly.

- Improved calculation of bounding rect for text.

- Fixed a bug making it possible to open multiple context menus using the 
  context menu key.

- Fixed writing of large files which failed on some systems.

- Optimized painting of ellipses.

- Fix problem where realease version of IDC

- Fix window state bug when restoring minimized maximized windows.

- Fix painting error on XP style tabs in right-to-left mode.

- Fix incorrect toolbar button spacing in XP and Windows style

- Fix bug making QFontiIfo::family() return an empty string.

- Tool windows are now resizable by default.

- Improved precision for tablet coordinates.

- Improved probing and detection for OpenGL overlay mode.

- Fixed issue where certain fonts would be incorrectly replaced when printing.

- Fixed issue with minimized fixed size dialogs not responding to user input.

- Fixed issue preventing bitmap fonts from beeing drawn using a scaled painter.

- Make sure QMAKE_PRE_LINK is respected by qmake on Windows.

- QPainter
	Fixed an issue where drawText() on a QPrinter sometimes would 
	be clipped away.
	Fixed drawEllipse() and drawLine() with negative coordinates.
	Fixed painting in OpaqueMode.

- QAxBase
	Fixed a bug preventing proper interaction with Excel.

- QAxWidget
	Fixed conversion of short* and char* output parameters.

- QFile
	Make sure QFile::copy() returns false when target exists.
	
- QFileinfo
	Fix crash when calling exists() on a invalid shortcut.

- QLibrary
	Enable loading of filenames with non-standard suffix.

- QLocale
	Added support for 'z' in time format strings.
	
- QPrinter 
	setPageSize() now correctly updates pageRect and paperRect.

- QTextBrowser
	Make sure QTextBrowser does not override QApplication::setOverrideCursor().
	
- QWindowsStyle
	Use the platform specific icons provided by the system when
	appropriate.


X11:

- Fixed a bug in QFontDatabase which made isFixedPitch() return 'true' for 
  certain non-fixed-pitch fonts, like "Sans Serif".
- Correctly handle the .so file extension on HP/UX IA-64.
- Fixed a crash when clicking a mouse button while dragging.
- Improve QProcess resource usage by making sure it closes all unused pipes.
- Make QFontEngine honor the autohinter setting from FontConfig. 
- Fixed a potential crash when drawing a large number of polygons/trapezoids.
- QtConfig
	Fixed missing update of window decorations.
	Fix assert when editing font family substitutions.
- Fixed X Error when closing application using the Motif style.
- Ensure that -style command line arguments are respected when using customized visual.
- Fixed issues with multiple painters on the same device.
	
Mac OS X:

- Fixed issues with pasting of Japanese characters.
- Fixed a bug that made the close button unavailable on modal windows.
- Fixed icon rendering on x86 CPUs.
- Fixed painting of QBitmap into a QPixmap.
- Added the -framework and -F configure options.
- Fixed a bug where the menubar would not show all items.
- Fixed several drag and drop issues.
- Fixed a bug causing the font size to change when clicking 
  checkable toolbar buttons.
- Fixed a crash when using a Qt-plugin in a non-Qt application.
- Fixed use of newlines in a QMessageBox.
- Fixed painting of QGroupBox without any text.
- Fixed rendering of Qt::FDiagPattern and Qt::BDiagPattern.
- Fixed building with -no-qt3support.
- Fixed painting of the sort indicator.
- Fixed text placements in QGroupBox.
- Fixed icon placements in QPushButton in RTL languages.
- Fixed painting of read-only lineedits.
- Fixed animation of the Composition Modes demo.
- Fixed painting of QSpinBoxes smaller than 25 pixels.
- Fixed bug preventing the page ranges in the print dialog form being set.
- Fixed bug causing QPrinter::pageSize() to return wrong sizes. 
- Fix setting printer resolution.
- Improve quality of PDF output. 
- Ensure that calling setDirtyRegion from within dragMoveEvent 
  updates the view.
- Fixed bug preventing designer from being hidden using "Command + H".
- Fixed bug resulting in painting and performance issues for embedded QGLWidgets
 when using MacMetalStyle.
- Fixed a bug sometimes preventing widgets from showing.
- Ensure that the correct number of tick marks are painted on sliders.
- Fixed issue where Qt::FramelessWindowHint widgets were not visible in expose.
- QLibrary
	isLibrary() now supports .dylib libraries with version numbers.
- Designer
	Fixed some painting issues with widgets that are not laid out.

Qtopia Core:

- Added configure options to build decorations and mouse drivers as plugins.
- Lots of new documentation.
- Added support for 8 and 16 bit screens.
- Fixed a bug that could result in painting errors after setting a new 
  decoration with QApplication::qwsSetDocoration().
- New skins for QVfb provided in the X11 package.
- Fixed the transparent corners of the window decoration using the plastique
  style.
- Removed dependency of shared memory when using QT_NO_QWS_MULTIPROCESS.
- Fix input method focus change problems.
- Look for fonts using QLibrary::LibrariesPath instead of PrefixPath
- Ensure that the smooth font flag is respected when parsing the 'fontdir' file.
- Fixed crash when Helvetica font is not available.
- Reduced memory usage with large fonts.

3rd-party libraries
-------------------
