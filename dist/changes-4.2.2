Qt 4.2.2 is a bug-fix release. It maintains both forward and backward
compatibility (source and binary) with Qt 4.2.0.

The Qt version 4.2 series is binary compatible with the 4.1.x and 4.0.x
series.  Applications compiled for 4.0 or 4.1 will continue to run with 4.2.

****************************************************************************
*                           General                                        *
****************************************************************************

Configure / Compilation
  * Unresolved zlib symbols on aix-g++ because of lacking "-lz" in gui/Makefile.

   * Fix compilation when an unsupported version of MySQL is auto-detected
     by the configure script

Demos / Examples

  * Fixed crash in settingseditor example resulting from entering certain input to
    a QTreeWidget using QLineEdit as an inline editor.

  * Fixed crash in portedcanvas example resulting from creating a new canvas from
    one that was shrunk to its minimum size.

Designer

****************************************************************************
*                          Library                                         *
****************************************************************************

General improvements
--------------------

- moc:

  *  Split long string literals in the generated code to work around
     MSVC limitations

  * Fix crash on *BSD on invalid input

- QTextDocument:

  * Fix support for pixel font sizes in the HTML import

- QFSFileEngine:
  * Fixed broken UNC path support.
  
- QLineEdit:

  * Fix scrolling in lineedits with custom paddings
  * Fixed crash on Linux when the text contains QChar::LineSeparator.

- QCalendarWidget:

  * Fixed setting the text format(Repainting & date reset issues are corrected).  

- QComboBox:
  * Fixed wrong scroll arrows for the popup menu.

- QWidget
  * Make setWindowTitle() work on hidden widgets that are never shown.
    (Fixing a bug in QtSingleApplication on Windows.)

   * Make QWidget::restoreGeometry() restore to the correct screen on 
     multi-screen systems.

- Accessibility

   * Fix potential assert when navigating menus while assistive tools are running

   * Fix crash when getting accessibility info from an item view without
     a model.
 
   * Fix item view accessibility bug where QAccessibleInterface::text() 
     would return an empty string for child indexes larger
     than one.

- QWorkspace
  * Memory corruption, which caused crash inside Visual Studio.

- QCompleter
  * highlighted() signal was emitted twice if setModel() was called twice
  * Make QCompleter usable inside dialogs

- QVariant
  * Fixed conversion of invalid variant to integer that sets ok to true
  
- Item views
      
      * Fixed possible assert in QTreeView when painting if there were
        layouts pending.
      
      * Fixed possible segfault in QTreeView when a model emits layoutChanged().
      
      * Fixed QHeaderView and QTableView overflow issues when the length
        of all the rows or columns went over max int.
      
      * When reset is emitted by a QAbstractItemModel, QHeaderView will now
        always update the header count().

      * Fixed regression where QAbstractItemView::setRootIndex() wasn't 
        always updating the view causing possibly painting errors.
      
      * Fixed QTreeWidget::setSortingEnabled() which could could cause
        incorrect painting.
      
      * Fixed incorrect scrolling in QHeaderView when items are hidden.

      * QDataWidgetMapper::mappedWidgetAt() now always returns the right
        mapped index for a widget no matter in which order they were inserted

      * QAbstractItemView::commitData() is made more robust by ignoring cases
        in which no valid index is associated with the editor

      * Fixed crash due to incorrect update of persistent model indexes in
        QSortFilterProxyModel::layoutChanged().

      * Fixed bug that could cause QSortFilterProxyModel::removeRows() and
        QSortFilterProxyModel::removeColumns() to remove the wrong source model
        items.

      * Fixed bug in QSortFilterProxyModel that caused stale proxy mappings to
        remain when source model items were removed and later reinserted,
        resulting in an incorrect proxy model.

      * Fixed bug in QSortFilterProxyModel that caused items to not appear
        in a QTreeView when adding children to a formerly childless source item.

      * Fixed painting bug for spanning cells in QTableView when the item
        background is transparent.

      * Fixed regression that caused incorrect propagation of Enter key press
        from a QAbstractItemView in editing mode.

      * Fixed erroneous expanding/collapsing of items in a QTreeView when
        double-clicking in the checkbox area of an item.

      * Fixed regression in QListWidget and QTreeWidget that caused persistent
        indexes to not be updated when sorting items.

      * Fixed crash in Q3IconView when selecting several items without releasing
        the left mouse button, then clicking the right mouse button.

      * Enter key can now be used to start item editing when the edit trigger
        is AnyKeyPressed.

      * Fixed crash in QTreeView::setRowHidden() when hiding and then un-hiding
        items in a hierarchy.

- Graphics View

  * The background cache in QGraphicsView is now properly initialized to
    the full viewport.

  * Fixed incorrect cursor updates when moving between items.

  * QGraphicsItem::setMatrix() now properly clears the original item before
    repainting.

  * QGraphicsEllipseItem is now drawn as a full ellipse at angles ..., -720, -360,
    360, 720, ... only.

- Painting

      * Fixed memory corruption in QBitmap when source buffer was smaller than
	the destination buffer (RasterEngine). 

      * Added caching of QGradient's colortable for QRasterPaintEngine.
        This means that if a gradient with the same stops and colors is used
        again, it will be quickly fetched from the cache, avoiding the
        expensive calculations of the color lookup table.

- Style Sheets
      * Fixed crash when widget with stylesheet is reparented into widget with no stylesheet
      * Style Sheet performace improvements
      * Do not clobber widget's custom palette when not styled using stylesheet
      * Add support to specify alpha colors using rgba()
      
- SQL plugins

      * Fixed incorrect translation of error strings in the Oracle plugin
      * Make sure PQfreemem is called to free allocated buffers in PostgreSQL
      * Prevent possible trailing garbage for TEXT fields in the MySQL plugin

- QSqlRelationalTableModel

      * Make sure the internal cache is correctly cleared when reverting inserted
        rows.
      

Platform-Specific changes
-------------------------

- Qt/X11:

  * Fixed positioning of text with stacking diacritics
  * Fixes for Indic text rendering
  * Fixed rendering of Greek and other latin scripts with
    XLFD fonts
  * Fix encoding detection of XLFD fonts
  * Fixed crash in QX11EmbedContainer.
  * QPrinter: Don't generate PDF on raw CUPS printers
  * When CUPS is not installed or reports 0 printers, QPrintDialog falls
    back to the printers set up for lpr/lprng.

- Qt/Win:

  * Fixed drawing of the 0xad character with symbol fonts
  * Fixed stacking order of dialogs when child is created before parent.
  * Fixed printing to pdf when no printers are installed.
  * Fixed "print to file" dialog only showing once after canceling the dialog.
  * Fixed name clashes in enum values when running dumpcpp (ActiveQt)

- Qtopia Core

  * Fixed delivery of mouse events to overlapping popups.
  * QVFb: Fixed crash when switching between certain skins.
  * QVFb: Fixed crash when recording.
  * QVFb: Fixed saving of animations on other partitions than /tmp.
  * VNC: Fixed use of the VNC driver with the Multi driver.
  * Fixed cursor state when switching between different screens.
  * Fixed performance bug when using an accelerated mouse cursor.
  * QCustomRasterPaintDevice::metric(): Fixed default values of PdmWidth and 
    PdmHeight.
  * Fixed bug in QWidget::setMask().
  * Fixed calibration of rotated screens in the mousecalibration example.
  * Fixed setMode() in the screen drivers LinuxFb, VNC and Transformed.
  * Fixed crash when using QWSCalibratedMouseHandler with filter size < 3.
  * Fixed QScreen::alloc() for non-default colormaps.
  * Fixed a bug preventing a QWSEmbedWidget to being displayed if the remote
    widget was hidden before it got embedded.
  * Fixed screen area reservation when using the QDirectPainter.
  * Fixed compilation of the MySQL driver when using the minimum configuration.
  * Fixed a bug in the LinuxFB driver which prevented it to switch back to
    text mode if the application termintated using exit().

- Qt/Mac

   * Fixed bug where the cursor would not switch to the arrow cursor 
     over child widgets witch had that cursor set.
   * FramelessWindow modal dialogs had a title bar and was movable,
     now they don't.
   * Fix crash when enabling "Accessibility for assistive devices" in
     System Preferences while a Qt application was running.
   * Fix painting error where a one-pixel border at the bottom, right
     side of widgets wasn't being (re)painted correctly. 
   * Fix item view scrolling bug, cell widgets weren't scrolled
     properly.

****************************************************************************
*                             QTestLib                                     *
****************************************************************************

   * Added missing documentation for QVERIFY2 macro
