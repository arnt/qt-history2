#!/usr/bin/perl

#
# NOTE: The first argument is the Qt version.
#

die unless ( $#ARGV > 0 );

undef $/;

$copyright = "
** Copyright (C) 1992-1998 Troll Tech AS.  All rights reserved.
**
** This file is part of Qt Free Edition, version " . $ARGV[0] . ".
**
** See the file LICENSE included in the distribution for the usage
** and distribution terms, or http://www.troll.no/free-license.html.
**
** IMPORTANT NOTE: You may NOT copy this file or any part of it into
** your own programs or libraries.
**
** Please see http://www.troll.no/pricing.html for information about 
** Qt Professional Edition, which is this same library but with a
** license which allows creation of commercial/proprietary applications.
**
*****************************************************************************/";

shift @ARGV;

foreach $f ( @ARGV ) {
    if ( open( F, "< $f" ) ) {
	$i = <F>;
	close F;
	$i =~ s=\n\*\* Copyright.*?\*/=$copyright=s;
	$i =~ s-\s*$--s;
	if ( open( F, "> $f" ) ) {
	    print F $i, "\n";
	    close F;
	}
    }
}
