<HTML
><HEAD
><TITLE
>Initializing The State Of Widgets In The Form</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.46"><LINK
REL="HOME"
HREF="book1.html"><LINK
REL="UP"
TITLE="Tutorial: Adding Additional Functionality To A Dialog By
	  Subclassing"
HREF="c289.html"><LINK
REL="PREVIOUS"
TITLE="Adding Functionality To The Push Buttons"
HREF="x324.html"><LINK
REL="NEXT"
TITLE="Connecting Widgets To Each Other"
HREF="x479.html"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x324.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 3. Tutorial: Adding Additional Functionality To A Dialog By
	  Subclassing</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x479.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="AEN438"
>Initializing The State Of Widgets In The Form</A
></H1
><P
>Our next goal is to initialize the widgets in the
		dialog. To repeat: We want all the topping checkboxes to be
		selected, the extra checkbox to be selected and the
		<SPAN
CLASS="GUILABEL"
>Junior</SPAN
> size to be chosen. And finally, we
		want to check the extra cheese checkbox on Mondays, but only
		on Mondays.</P
><P
>Initialization is usually done in a constructor, and our
		pizza order entry application makes no difference. As before,
		we will not touch the code generated by
		<B
CLASS="COMMAND"
>uic</B
>, because this code would be lost the
		next time we run <B
CLASS="COMMAND"
>uic</B
>. So we are in for
		another addition to our derived class
		<TT
CLASS="LITERAL"
>PizzaEntryImpl</TT
>. So far, the constructor was
		empty, now we will fill it with content.</P
><P
>The task at hand is not very difficult, but we need to
		distinguish two different cases here: Checking the various
		toppings and selecting the <SPAN
CLASS="GUILABEL"
>Family</SPAN
> size is
		static, we always want to do that. But checking the
		<SPAN
CLASS="GUILABEL"
>Extra Cheese</SPAN
> checkbox on Mondays is not
		static, we need to compute the day of the week first. Bur for
		now, let's start with the simple case, the static
		selections.</P
><P
>Whether a checkbox is checked or not is a property of
		the checkbox, and the same goes for radiobuttons. So we can
		just use the property editor for setting these properties:
		Click on each of the toppings checkboxes one by one and set
		the value of the property <I
CLASS="EMPHASIS"
>checked</I
> to
		<TT
CLASS="LITERAL"
>true</TT
> by selecting <TT
CLASS="LITERAL"
>true</TT
>
		from the combobox in the value column. Do the same for the
		<SPAN
CLASS="GUILABEL"
>Family</SPAN
> radiobutton. That's it.</P
><P
>Now for the extra cheese checkbox. Since we said that we
		do not know before runtime whether the checkbox should be
		checked or not when the pizza entry form is shown, we cannot
		use the property editor, but have to do this
		programmatically. In theory, all we need to
		do is see whether we have a Monday, call
		<TT
CLASS="LITERAL"
>setChecked()</TT
> on the extra cheese
		checkbox and passing the desired value. The question is how we
		get access to this widget.</P
><P
>Of course, situations like these are very common which
		is why Qt Designer provides for a very simple solution: All
		the widgets are represented as pointers with
		<TT
CLASS="LITERAL"
>public</TT
> access in the generated base
		class. All you need to do is find out the correct widget
		pointer and call <TT
CLASS="LITERAL"
>setChecked()</TT
> on it.</P
><P
>If you check the generated file
		<TT
CLASS="FILENAME"
>PizzaEntry.h</TT
>, you see that the widget
		pointers have non-obvious names like
		<TT
CLASS="LITERAL"
>CheckBox1</TT
> or
		<TT
CLASS="LITERAL"
>RadioButton3</TT
>. You might wish that you had
		assigned the <I
CLASS="EMPHASIS"
>name</I
> properties of all the
		widgets sensible names, and in fact it is not too late to do
		that: You could just load the file
		<TT
CLASS="FILENAME"
>pizza.ui</TT
> into Qt Designer, change all
		<I
CLASS="EMPHASIS"
>name</I
> properties, save the file and
		regenerate <TT
CLASS="FILENAME"
>PizzaEntry.h</TT
> and
		<TT
CLASS="FILENAME"
>PizzaEntry.cpp</TT
>.</P
><P
>On the other hand, this is just a simple example, so we
		might get away with just guessing or checking in the designer
		which variable represents the extra cheese checkbox. Here is what we
		guessed &#8212; the name might be slightly different for you
		depending on the order in which you originally inserted the
		widgets:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>#include &#60;qcheckbox.h&#62;
#include &#60;qradiobutton.h&#62;

PizzaEntryImpl::PizzaEntryImpl( QWidget* parent, 
                                const char* name, bool modal, WFlags f ) :
  PizzaEntry( parent, name, modal, f )
{
  QDate date = QDate::currentDate();
  if( date.dayOfWeek() == 1 )
    CheckBox5-&#62;setChecked( true );
  else
    CheckBox5-&#62;setChecked( false );
}</PRE
></TD
></TR
></TABLE
><P
>As you can see, we use the class
		<TT
CLASS="LITERAL"
>QDate</TT
> and its methods
		<TT
CLASS="LITERAL"
>currentDate()</TT
> and
		<TT
CLASS="LITERAL"
>dayOfWeek()</TT
> to find out whether the current
		day is a monday. Based on this information, we either call
		<TT
CLASS="LITERAL"
>setChecked( true )</TT
> or <TT
CLASS="LITERAL"
>setChecked(
		false )</TT
>.</P
><P
>Add this code to your file
		<TT
CLASS="FILENAME"
>PizzaEntryImpl.cpp</TT
> and don't forget to
		remove the empty constructor implementation from
		<TT
CLASS="FILENAME"
>PizzaEntryImpl.h</TT
>. Compile your program
		with exactly the same commands as in the previous section and
		run it. The widgets should now be initialized as
		specified.</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x324.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book1.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x479.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Adding Functionality To The Push Buttons</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="c289.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Connecting Widgets To Each Other</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>