<HTML
><HEAD
><TITLE
>Tutorial: Using Layout Management</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.46"><LINK
REL="HOME"
HREF="book1.html"><LINK
REL="UP"
TITLE="Qt Designer Tutorial and Users Manual"
HREF="p21.html"><LINK
REL="PREVIOUS"
TITLE="Connecting Widgets To Each Other"
HREF="x479.html"><LINK
REL="NEXT"
TITLE="Popular Mechanics: Working With Spacers"
HREF="x604.html"></HEAD
><BODY
CLASS="CHAPTER"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x479.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x604.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="CHAPTER"
><H1
><A
NAME="AEN498"
>Chapter 4. Tutorial: Using Layout Management</A
></H1
><DIV
CLASS="TOC"
><DL
><DT
><B
>Table of Contents</B
></DT
><DT
><A
HREF="c498.html#AEN514"
>Putting A Form Together With Layouts</A
></DT
><DT
><A
HREF="x604.html"
>Popular Mechanics: Working With Spacers</A
></DT
></DL
></DIV
><P
>Let's start this tutorial with a simple truth: Each form
	  in each application needs to be layouted. You might not have
	  given this much thought, but when you created the pizza entry
	  form in the previous tutorial, you were actually layouting the
	  dialogs: You decided where to put the individual widgets, which
	  size they should get, and so on.</P
><P
>Perhaps you thought that this was not much of a problem,
	  but doing the layouts this way by hand leads to a number of
	  problems:</P
><P
></P
><UL
><LI
><P
>The layouting gets increasingly difficult in larger
		  dialogs.</P
></LI
><LI
><P
>If the form is a dialog, it will not resize
		  correctly. Once the user resizes the dialog, your carefully
		  crafted layout is shred to pieces. Of course, you can make
		  the dialog non-resizable, but it is very likely that your
		  users will not be too happy about this.</P
></LI
><LI
><P
>If you want to internationalize your program, your
		  hand-crafted layouts will not work
		  either. Internationalizing a program means preparing it for
		  translations, and of course you only do this if you expect
		  there to be translations later. But translations, especially
		  from English to other languages, have the nasty property
		  that the translated text is often longer than the original
		  text. Think of a checkbox whose label has become larger
		  after translating: The checkbox might not be large enough to
		  accomodate its own label, and even if it would resize itself
		  magically somehow, then the checkbox would not fit any
		  longer in the surrounding groupbox, and so on.</P
></LI
><LI
><P
>If you want to allow the user to run the program with
		  different application fonts, then all the problems just
		  described apply as well.
		 </P
></LI
><LI
><P
>And finally, the same goes if you want to be able to
		  switch widget styles dynamically (or let the user do
		  so), i.e., you do not want to hardcode the widget style.</P
></LI
></UL
><P
>Hopefully, you are now convinced that hand-crafted layouts
	  are not the way to go. But what is the alternative? Qt provides
	  a sophisticated layout system that does all the layouting for
	  you. If you want to program layouts using this system directly,
	  then you have to learn quite a lot and follow a number of rules,
	  but with Qt Designer, using automated layouts is quite
	  intuitive.</P
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="AEN514"
>Putting A Form Together With Layouts</A
></H1
><P
>In this section, we will create a form that resembles
		the one we did in the previous tutorials, but will use
		automatic layout management. The final form will look
		strikingly similar to the one you already created, but behave
		a lot better with respect to the aforementioned
		problems. Also, you will see that the design goes actually
		faster with layout management once you get used to it.</P
><P
>Let's take a fresh start and begin with an empty
		form. Start Qt Designer if it is not yet running and click on
		the icon for creating a new form. Select
		<SPAN
CLASS="GUILABEL"
>Dialog</SPAN
> as the form type.</P
><P
>Again, we start with the toppings, but this time we will
		begin with the button group right away and just put the
		checkboxes on top of it. So, select the button group tool and
		insert a button group. Give it the text
		<SPAN
CLASS="GUILABEL"
>Toppings</SPAN
> and make it large enough so that
		you can put four checkboxes onto it without problems. You can
		even make it really huge, we will have it resized
		automatically later.</P
><P
>Now, select the checkbox tool and put a checkbox onto
		the button group. Change the label to
		<SPAN
CLASS="GUILABEL"
>Champignons</SPAN
>. Repeat the process with
		three more checkboxes labelled <SPAN
CLASS="GUILABEL"
>Ham</SPAN
>,
		<SPAN
CLASS="GUILABEL"
>Pineapples</SPAN
>, and
		<SPAN
CLASS="GUILABEL"
>Anchovis</SPAN
>, respectively. You do not need
		to take any care about alignments or such, just put the four
		checkboxes roughly below each other. When you are done, your
		form might look like in <A
HREF="c498.html#QT-DESIGNER-FIG-LAYOUTTUTSTEP1"
>Figure 4-1</A
>.</P
><DIV
CLASS="FIGURE"
><A
NAME="QT-DESIGNER-FIG-LAYOUTTUTSTEP1"
></A
><P
><B
>Figure 4-1. The checkboxes are not layouted yet</B
></P
><P
><IMG
SRC="figures/layouttutstep1.png"></P
></DIV
><P
>Now we want to layout this button group with its four
		checkboxes. This requires some thinking. Automated layouting
		in Qt is always done with respect to a container; you could
		say that it is the container that is layouted. In practice,
		the container is just any widget that happens to have widget
		children, so there is nothing special about
		containers.<A
NAME="AEN532"
HREF="#FTN.AEN532"
>[1]</A
> Just remember that when you want to arrange a
		  few widgets like in our case the four checkboxes, the
		  layouting process does not apply to the widgets but to their
		  container (parent) &#8212; in our case the button
		  group.</P
><P
>The next thing to think about is which kind of layout
		you want. Qt currently provides three different kinds of
		layout managers: one that arranges the widgets horizontally,
		i.e., in a row, one that arranges the widgets vertically,
		i.e., in a column, and one that arranges the widgets both
		horizontally and vertically, i.e., in a grid. You can also
		combine different layout managers to achieve the desired
		result, for example, you might often find the grid layout
		managers layout policy a bit too restrictive and resort to
		putting together some rows and columns which gives you much
		more flexibility at the price of a bit more work.</P
><P
>For our button group with the four checkboxes it is
		obvious that we want a vertical layout, i.e., that we want to
		arrange the checkboxes in a column. And we also know now that
		we need to apply the layout to the button group, not to the
		checkboxes themselves. So, to put all this together, click on
		the background of the button group widget and select
		<SPAN
CLASS="GUIMENU"
>Layout/Layout Vertically</SPAN
>, click on the
		vertical layout button on the taskbar (see <A
HREF="c498.html#QT-DESIGNER-ICON-VLAYOUT"
>Figure 4-2</A
>) or select
			<SPAN
CLASS="GUIMENU"
>Layout Vertically</SPAN
> from the button
			group's context menu. Magically, all the buttons are
			aligned, and the button group has exactly the size it
			needs to accomodate the buttons (see <A
HREF="c498.html#QT-DESIGNER-FIG-LAYOUTTUTSTEP2"
>Figure 4-3</A
>).</P
><DIV
CLASS="FIGURE"
><A
NAME="QT-DESIGNER-ICON-VLAYOUT"
></A
><P
><B
>Figure 4-2. The vertical layout icon</B
></P
><P
><IMG
SRC="figures/vlayout.png"></P
></DIV
><DIV
CLASS="FIGURE"
><A
NAME="QT-DESIGNER-FIG-LAYOUTTUTSTEP2"
></A
><P
><B
>Figure 4-3. The checkboxes are now layouted in the button group</B
></P
><P
><IMG
SRC="figures/layouttutstep2.png"></P
></DIV
><P
>Assigning a layout has some other consequences: If you
		know click on one of the checkboxes, you will see that the
		handles are no longer black, but grey. If you try, you will
		also notice that you can no longer move or resize the
		checkboxes. This is because the column layout manager that you
		have assigned to the button group has taken over the
		responsibility for assigning sizes and positions to the
		layouted widgets. If you look very closely at the property
		editor, you will also notice that the property
		<I
CLASS="EMPHASIS"
>geometry</I
> has disappeared from it &#8212;
		again, because you cannot change it any longer.</P
><P
>If you want to change sizes or positions of the layouted
		widgets again, you have to remove the layout manager. This is
		called <I
CLASS="EMPHASIS"
>breaking the layout</I
>. You do this
		by selecting <SPAN
CLASS="GUIMENU"
>Layout/Break Layout</SPAN
> from the
		menubar, <SPAN
CLASS="GUIMENU"
>Break Layout</SPAN
> from the context menu
		of the button group or by clicking on the toolbar button for
		breaking the layout (see <A
HREF="c498.html#QT-DESIGNER-ICON-BREAKLAYOUT"
>Figure 4-4</A
>).</P
><DIV
CLASS="FIGURE"
><A
NAME="QT-DESIGNER-ICON-BREAKLAYOUT"
></A
><P
><B
>Figure 4-4. The &#8220;break layout&#8221; icon</B
></P
><P
><IMG
SRC="figures/breaklayout.png"></P
></DIV
><P
>You might want to try the other layout managers as well. Break
		the column layout and assign a row layout instead (see <A
HREF="c498.html#QT-DESIGNER-FIG-LAYOUTTUTSTEP3"
>Figure 4-5</A
>). You can also try a
		grid layout, but you will not see much good in this situation;
		we will explain later why. However, when you do these
		experiments, it is good to know that you can always go back
		with the undo button (see <A
HREF="c498.html#QT-DESIGNER-ICON-UNDO"
>Figure 4-6</A
>) or by selecting
			<SPAN
CLASS="GUIMENU"
>Edit/Undo</SPAN
> from the menubar. With the
			undo and redo functionality, you can explore various
			options for your forms without committing to anything that
			you cannot take back later.</P
><DIV
CLASS="FIGURE"
><A
NAME="QT-DESIGNER-FIG-LAYOUTTUTSTEP3"
></A
><P
><B
>Figure 4-5. Arranging the checkboxes in a row</B
></P
><P
><IMG
SRC="figures/layouttutstep3.png"></P
></DIV
><DIV
CLASS="FIGURE"
><A
NAME="QT-DESIGNER-ICON-UNDO"
></A
><P
><B
>Figure 4-6. The undo icon</B
></P
><P
><IMG
SRC="figures/undo.png"></P
></DIV
><P
>When you are done trying various things with the
		toppings button group, restore the state of <A
HREF="c498.html#QT-DESIGNER-FIG-LAYOUTTUTSTEP2"
>Figure 4-3</A
> and start working on
		the button group for the pizza size. You should put it
		somewhere to the right of the toppings button group, but
		again, you do not have to worry about alignments yet; this
		will be taken care of automatically later. When you are done,
		assign a vertical layout to the size button group as
		well. Your form should now look roughly like in <A
HREF="c498.html#QT-DESIGNER-FIG-LAYOUTTUTSTEP4"
>Figure 4-7</A
>.</P
><DIV
CLASS="FIGURE"
><A
NAME="QT-DESIGNER-FIG-LAYOUTTUTSTEP4"
></A
><P
><B
>Figure 4-7. Two layouted button groups</B
></P
><P
><IMG
SRC="figures/layouttutstep4.png"></P
></DIV
><P
>Now finish putting elements onto the form by inserting
		the extra cheese checkbox and the <SPAN
CLASS="GUILABEL"
>OK</SPAN
> and
		<SPAN
CLASS="GUILABEL"
>Cancel</SPAN
> push buttons. Put them roughly
		where they were in the previous form. Your form should now
		look like in <A
HREF="c498.html#QT-DESIGNER-LAYOUTTUTSTEP5"
>Figure 4-8</A
>.</P
><DIV
CLASS="FIGURE"
><A
NAME="QT-DESIGNER-LAYOUTTUTSTEP5"
></A
><P
><B
>Figure 4-8. More widgets to be layouted</B
></P
><P
><IMG
SRC="figures/layouttutstep5.png"></P
></DIV
><P
>At this point, you could say that we have five different
		elements on the form: the two button groups, the extra cheese
		checkbox and the two push buttons. At this stage, we do not
		care about the fact that the button groups actually are
		compound elements as well, they are layouted and done, we just
		consider them elementary widgets for the time being. But know
		we want to layout these five elements. This is a typical
		situation when designing a form with Qt Designer: The idea is
		to do the design in two different stages: First, you put all
		the widgets onto the form and assign them the desired
		properties, then you layout them by assigning layout
		managers. Of course, in evolutionary development, you will go
		back to stage one now and then (this often means breaking
		layouts), add, remove, or change some widgets and then go back
		to layouting. The distinction between the two phases is more a
		conceptual one than one that is enforced by the program.</P
><P
>We might be able to arrange the five elements into a
		grid, but this would probably look unnatural. Instead, we will
		try to find a good combination of rows and columns. There are
		not so many rules for doing this, you basically learn this by
		doing, experimenting, and looking at other peoples'
		well-designed dialogs (or learning from the mistakes being
		made in the not-so-well-designed dialogs). But one common
		theme in dialog design is that the main orientation is
		vertical, i.e., that the dialog consists of a number of rows
		that are layouted on top of each other. Sometimes, the rows
		have some internal vertical structure as well, and sometimes
		these internal vertical structures have a horizontal
		structure, but this is already rather rare.</P
><P
>If you look at your form in its current state, you might
		already see this pattern: We could assemble the two button
		groups in a row, leave the extra cheese checkbox on a row by
		itself, and put the two push buttons in a third row. Then, we
		just put these three rows in top of each other in a vertical
		layout.</P
><P
>Let's start following this plan by putting the two
		button groups in a row. Earlier, you learned that layout
		managers are always applied to a container, and it is
		difficult to see a suitable container for the two button
		groups here. The only parent that they have is the form as a
		whole, and this will not work, because assining the form a row
		layout manager would mean that all five components would be
		put in one row, which is certainly not what we want.</P
><P
>Luckily, we can just select the widgets that we want to
		be layouted and select a layout manager for them, and Qt
		Designer will automatically provide an invisible
Reggie: are those nested layouts or real
 Thus, click on the left button group, hold the
		shift key and click on the second button group so that these
		two (and nothing else) are selected. Now use any of the meanas
		described above to assign a horizontal layout manager. The two
		button groups will be aligned, and a thin red frame indicates
		the invisible container that was created to hold the row
		layout manager (cf. <A
HREF="c498.html#QT-DESIGNER-FIG-LAYOUTTUTSTEP6"
>Figure 4-9</A
>).</P
><DIV
CLASS="FIGURE"
><A
NAME="QT-DESIGNER-FIG-LAYOUTTUTSTEP6"
></A
><P
><B
>Figure 4-9. A new layout manager was created for the button groups</B
></P
><P
><IMG
SRC="figures/layouttutstep6.png"></P
></DIV
><P
>Now do the same with the two push buttons. With these
		steps, the elements to be layouted have been reduced to three,
		the two layouted rows and the single checkbox in between. It
		is not necessary at this point to put the checkbox into a row
		all by itself.</P
><P
>Next, select the form itself by clicking on the
		background and assign a vertical layout. This will arrange the
		remaining three pieces, the row with the two button groups,
		the extra cheese checkbox and the row with the push buttons on
		top of each other. Now all the widgets are nicely grouped
		together as you 
		can see in <A
HREF="c498.html#QT-DESIGNER-FIG-LAYOUTTUTSTEP7"
>Figure 4-10</A
>. Some
		things might not be perfect (for example, the extra cheese
		checkbox should be centered below the button groups), but
		we'll fix that later.</P
><DIV
CLASS="FIGURE"
><A
NAME="QT-DESIGNER-FIG-LAYOUTTUTSTEP7"
></A
><P
><B
>Figure 4-10. All widgets are arranged</B
></P
><P
><IMG
SRC="figures/layouttutstep7.png"></P
></DIV
><P
>To test the dialogs correct behavior while resizing, go
		into test mode as described previously and try resizing the
		dialog. See how the space is distributed amongst the
		widgets. Also notice that you cannot make the dialog smaller
		than the minimum size needed to accomodate all the
		widgets.</P
></DIV
></DIV
><H3
CLASS="FOOTNOTES"
>Notes</H3
><TABLE
BORDER="0"
CLASS="FOOTNOTES"
WIDTH="100%"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN532"
HREF="c498.html#AEN532"
>[1]</A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>Unlike in e.g. the Java AWT where a distinction is
			made between containers and components, and only
			containers can contain other containers and components and
			be layouted.</P
></TD
></TR
></TABLE
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x479.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book1.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x604.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Connecting Widgets To Each Other</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="p21.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Popular Mechanics: Working With Spacers</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>