<HTML
><HEAD
><TITLE
>Laying Out Widgets &#38; Previewing </TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.57"><LINK
REL="HOME"
HREF="book1.html"><LINK
REL="UP"
TITLE="Creating a Qt Application"
HREF="c69.html"><LINK
REL="PREVIOUS"
TITLE="Adding Widgets "
HREF="addingwidgets.html"><LINK
REL="NEXT"
TITLE="Connecting up an Application "
HREF="connectingupanapplication.html"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="addingwidgets.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 1. Creating a Qt Application</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="connectingupanapplication.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="LAYINGOUTWIDGETSANDPREVIEWING"
>Laying Out Widgets &amp; Previewing</A
></H1
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="INTRODUCTIONTOLAYOUTS"
>Introduction to Layouts</A
></H2
><P
> 
    Layouts work by grouping together widgets and groups of widgets,
    horizontally, vertically or in a grid. Widgets that are laid out
    together horizontally or vertically can be grouped either with a
    Layout or with a Splitter; the only difference is that a user can
    manipulate a Splitter themselves.
    </P
><P
>    If we want to lay out some widgets side by side we would select them
    and then click the <SPAN
CLASS="GUIBUTTON"
>Lay Out Horizontally</SPAN
>
    toolbar button. If we want our widgets to be lined up one above
    the other we would use <SPAN
CLASS="GUIBUTTON"
>Lay Out Vertically</SPAN
>.
    Once we've grouped some widgets together we can then lay out the
    groups in relation to each other, again using vertical, horizontal
    or grid layouts. Once we have a collection of laid out groups we
    then click on the form itself and lay out the groups within the form
    using one of the layout buttons. 
    </P
><P
>    Some widgets will grow to fill the available space, vertically or
    horizontally or both ways. Buttons and line edits will fill
    horizontal space for example, whereas a ListView will fill space in
    both directions. The easiest way to achieve the layout you want is
    to use <I
CLASS="EMPHASIS"
>Qt Designer</I
>'s layout tools. When you apply a layout to some widgets
    in some situations the widgets may not lay out the way you want.
    If a widget does not fill up enough space try changing its
    sizePolicy to Expanding. If a widget takes up too much space one
    approach is to change its sizePolicy, and another approach is to use
    a <I
CLASS="EMPHASIS"
>Spacer</I
> to consume excess space.
    </P
><P
>    Spacers have no visual appearance on the running form and are used
    purely to insert space between widgets or groups of widgets. Suppose
    you have a widget that takes up too much space. You could break the
    layout and resize the widget to make room for a spacer. Then you
    would insert the spacer and layout the spacer with the widgets and
    the spacer will consume the excess space. If the spacer doesn't take
    up the right amount of space you can change its sizePolicy for finer
    control. 
    </P
><P
>    The best way to learn about layouts and spacers is to try
    them out. Experimenting with layouts is easy. If you make any
    changes that you aren't happy with you can easily undo them by
    clicking <SPAN
CLASS="GUIMENUITEM"
>Edit|Undo</SPAN
> or pressing
    <B
CLASS="KEYCAP"
>Ctrl+Z</B
>. In the next section we'll lay out our
    multiclip example step-by-step.
    </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="LAYINGOUTWIDGETS"
>Laying Out Widgets</A
></H2
><P
>    Layouts provide a means of relating widgets and groups of widgets
    together in horizontal and vertical pairs and in grids. If you use
    layouts your forms and the widgets they contain will scale
    automatically when the user resizes the window. This is better than
    using absolute sizes and positions since you don't have to write any
    code to achieve the scaling and your users can make the most of
    their screen size whether they have a laptop or a very large screen
    desktop machine. Layouts use standard sizes for margins and widget
    spacing which helps give your applications a consistent and
    proportional look without requiring any effort on your part. Layouts
    are also easier and faster to use than absolute positioning; you can
    just place your widgets on the form in approximate positions and
    leave the layout tools to size and scale the widgets correctly.
    </P
><TABLE
CLASS="SIDEBAR"
BORDER="1"
CELLPADDING="5"
><TR
><TD
><DIV
CLASS="SIDEBAR"
><A
NAME="SELECTINGWIDGETS"
></A
><P
><B
>Selecting Widgets and Inserting Widgets</B
></P
><P
>    To select an individual widget, either click it or click its Name in
    the Object Hierarchy window. To select a group either click a tiny
    bit outside its red outline or click its Name in the Object
    Hierarchy window. To select multiple widgets or groups, click the
    form to deselecte any selected widgets, then Ctrl+Click
    one widget or group then drag the rubber band so that
    it touches the other widgets or groups that you want to select. This
    technique is particularly useful for selecting widgets that are
    <I
CLASS="EMPHASIS"
>inside</I
> another widget. For example to select
    the radio buttons in a button group but not the button group itself
    you would click the form then Ctrl+Click one of the radio buttons
    and drag the rubber band to touch the other radio buttons.
    </P
><P
>    If we want to insert a widget into a gap between widgets
    which are in a layout we can click the toolbar button for the new
    widget and then click in the gap. <I
CLASS="EMPHASIS"
>Qt Designer</I
> will ask us if we want to
    break the layout and if we click <SPAN
CLASS="GUIBUTTON"
>Break Layout</SPAN
>
    the layout will be broken and our widget inserted. We can then
    select the widgets and groups we want to lay out and lay them out
    again. The same effect can be achieved by clicking the group and
    either clicking the <SPAN
CLASS="GUIBUTTON"
>Break Layout</SPAN
> toolbar
    button or pressing <B
CLASS="KEYCAP"
>Ctrl+B</B
>.
    </P
></DIV
></TD
></TR
></TABLE
><P
>    The layout we want to achieve is to have the Current Clipping label
    and currentLineEdit side by side at the top of the form. We want the
    Previous Clippings label and the clippingsListBox to occupy the left
    hand side of the form with the remaining widgets in a column on the
    right. We want to divide left and right with a splitter and make the
    left hand side larger by default. We'll leave the sizing of the
    widgets to <I
CLASS="EMPHASIS"
>Qt Designer</I
>. The layout controls are in the Layout toolbar. (By
    default this is the fourth toolbar counting left to right.) We'll
    now lay out the widgets we've placed on the form.
    <P
></P
><OL
TYPE="1"
><LI
><P
>    Click the Current Clipping label and Shift+Click the currentLineEdit
    Line Edit. (Shift+Click means hold down the shift key whilst
    clicking; this will ensure that <I
CLASS="EMPHASIS"
>Qt Designer</I
> performs multiple selections.)
    Most of the layout toolbar buttons will now be available. Click the
    <SPAN
CLASS="GUIBUTTON"
>Lay Out Horizontally</SPAN
> toolbar button. (If you hover
    the mouse over a toolbar button a tooltip giving the button's name
    will appear.) The two
    widgets will be moved together with a thin red line surrounding
    them. It doesn't matter that the widgets aren't the right size or in
    exactly the right place; as we progress with the layout <I
CLASS="EMPHASIS"
>Qt Designer</I
> will
    size and place them correctly.
    </P
></LI
><LI
><P
>    Click the Previous Clippings label and Shift+Click the
    clippingsListBox. Click the <SPAN
CLASS="GUIBUTTON"
>Lay Out
    Vertically</SPAN
> toolbar button.
    </P
></LI
><LI
><P
>    We want the remaining widgets to be grouped together vertically. We
    could Shift+Click each one but instead click the form then Ctrl+Click 
    the Length label and drag until the Length label, the
    LCD Number, the check box and all the buttons are all touching the
    rubber band (a black outline rectangle) that appears when you drag.
    Release the mouse, and all the remaining widgets should be selected.
    If you missed any Shift+Click them. Now click the <SPAN
CLASS="GUIBUTTON"
>Lay Out
    Vertically</SPAN
> toolbar button.
    </P
></LI
></OL
>
    </P
><P
>    We now have three groups of widgets which must be laid out in
    relation to each other and then laid out in relation to the form
    itself.
    <P
></P
><OL
TYPE="1"
><LI
><P
>    Shift+Clicking is used to select individual widgets. To select a
    group we must click the form to deselect any selected widgets, then
    Ctrl+Click the group and drag so that the rubber band touches the
    groups we want to lay out and then release. Ctrl+Click the list box
    drag the rubber band over the one of the buttons, then release. Both
    groups should now be selected. Click <SPAN
CLASS="GUIBUTTON"
>Lay Out Horizontally
    (in Splitter)</SPAN
>. 
    </P
></LI
><LI
><P
>    We now have two groups, the top one with the Current Clipping label
    and the line edit and the group we've just created with the list box,
    buttons and other widgets. We now want to lay these out in relation
    to the form. Click the form and click <SPAN
CLASS="GUIBUTTON"
>Lay Out
    Vertically</SPAN
>. The widgets will be resized to fill the
    entire form.     
    </P
></LI
></OL
>
    </P
><P
>    Unfortunately the Length label and the LCD Number take up far too
    much space, so we will have to revise the layout. With experience
    you will find that you do not need to rework layouts very often. We
    will insert a spacer which will use the extra space.
    <P
></P
><OL
TYPE="1"
><LI
><P
>    First we must make some room for the spacer. Click the LCD Number to
    select it. Now click the <SPAN
CLASS="GUIBUTTON"
>Break Layout</SPAN
> toolbar
    button. Move the LCD Number up a little bit, there's no need to be
    exact we just want to create some space below it.  
    </P
></LI
><LI
><P
>    Now we'll add the spacer.
    Click the
    <SPAN
CLASS="GUIBUTTON"
>Spacer</SPAN
> toolbar button, then click the form
    in the space you've created between the LCD Number and the check
    box. A pop up menu with two options, Horizontal and Vertical, will
    appear; click Vertical. We chose vertical because we want the spacer
    to consume excess vertical space.
    </P
></LI
><LI
><P
>    We need to regroup the buttons and other widgets in a vertical
    group. Drag the mouse from near the bottom right of the form so that
    the rubber band includes or touches the buttons, the
    check box, the spacer, the LCD Number and the Length label; then
    release. If you selected any other widgets by mistake, click the
    form and try the drag again. Click the <SPAN
CLASS="GUIBUTTON"
>Lay Out
    Vertically</SPAN
> toolbar button.
    </P
></LI
><LI
><P
>    We now have three groups as we had before, only this time with the
    small addition of the spacer. Select the list box and the buttons by
    clicking the form, dragging and releasing once the rubber band
    covers or touches both groups. Click <SPAN
CLASS="GUIBUTTON"
>Lay Out Horizontally
    (in Splitter)</SPAN
> to regroup
    them with the splitter.
    </P
></LI
><LI
><P
>    The last step is to lay out the form itself. Click the form and
    click <SPAN
CLASS="GUIBUTTON"
>Lay Out Vertically</SPAN
>. The form should now
    be laid out correctly.	
    </P
></LI
></OL
>
    There are two small deficiencies in the layout that we have
    achieved. Firstly the list box and buttons take up an equal width
    whereas we'd rather have the list box take up about three quarters
    of the width. Secondly the Length label, the check box and the
    buttons extend right up to the splitter. They would look more
    attractive if there was a little bit of space separating them from
    the splitter.
    </P
><P
> 
    Expanding the list box half of the splitter would require us to add
    the following code to the form's <TT
CLASS="FUNCTION"
>init()</TT
>
    function:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>    QValueList&lt; int &gt; sizes;
    sizes &lt;&lt; 250 &lt;&lt; 40;
    Splitter-&gt;setSizes( sizes );</PRE
></TD
></TR
></TABLE
>
    We won't add this code now since we'll deal with the code when we
    come to implement the application's functionality later in the
    chapter. 
    </P
><P
>    We will create some space around the splitter by changing the
    margins of the layout groups that it joins together. To click a
    layout either click a tiny bit above the layout's top red line or
    click the layout's name in the Object Explorer. (See <A
HREF="layingoutwidgetsandpreviewing.html#THEOBJECTEXPLORER"
>the sidebar <I
>The Object Explorer</I
></A
> "The Object Explorer" sidebar for an
    explanation of the Object Explorer window.) Click the layout that
    contains the list box, and change the layoutMargin property to 6,
    then press <B
CLASS="KEYCAP"
>Return</B
>. Click the layout that contains
    the buttons and other widgets and change
    its layoutMargin to the same value in the same way. 
    </P
><TABLE
CLASS="SIDEBAR"
BORDER="1"
CELLPADDING="5"
><TR
><TD
><DIV
CLASS="SIDEBAR"
><A
NAME="THEOBJECTEXPLORER"
></A
><P
><B
>The Object Explorer</B
></P
><P
>    View the Object Explorer window by clicking
    <SPAN
CLASS="GUIMENUITEM"
>Window|Views|Object Explorer</SPAN
>. The Object
    Explorer has two tabs, the Widgets tab which shows the object
    hierarchy, and the Source tab which shows the source code you have
    added to the form. Clicking the name of a widget in the Widget tab
    will select the widget and show its properties in the Property
    Editor. It is easy to see and select widgets
    in the Object Explorer which is especially useful for forms that
    have many widgets or which use layouts. 
    </P
><P
>    In the original version of <I
CLASS="EMPHASIS"
>Qt Designer</I
> if you wanted to provide code for a
    form you had to subclass the form and put your code in the
    subclass. This version of Designer fully supports the subclassing
    approach, but now provides an alternative: placing your code
    directly into forms. Writing code in Designer is not quite the same
    as subclassing, for example you cannot get direct access to the
    form's constructor or destructor. Instead two functions
    <TT
CLASS="FUNCTION"
>init()</TT
> (called after construction) and
    <TT
CLASS="FUNCTION"
>destroy()</TT
> (called before destruction) are
    created by default. You can also add your own class variables which
    will be put in the generated constructor's code, and you can add
    forward declarations and any includes you require. To add a variable
    or declaration right click the appropriate item, e.g. Class
    Variables, then click New then enter your text, e.g.
    <TT
CLASS="LITERAL"
>QString fileName</TT
>. If one or more items exist
    right clicking will pop up a two item menu with New and Delete as
    options. To edit code just click the name of a function. Code
    editing and creating slots are covered later.
    </P
><P
>    If you subclass the form you create your own 
    <TT
CLASS="FUNCTION"
>.cpp</TT
> files which can contain your own
    constructor, destructor, functions, slots, declarations and
    variables as your requirements dictate. (See <A
HREF="c812.html#SUBCLASSING"
>the section called <I
>Subclassing</I
> in Chapter 4</A
> "Subclassing" for more information.) 
    </P
></DIV
></TD
></TR
></TABLE
><P
>    In the example we've presented we've used <I
CLASS="EMPHASIS"
>Qt Designer</I
>'s layout tools to lay
    out our widgets. We will use the layout tools again in the examples
    presented in later chapters. If you want to use absolute
    positioning, i.e. to place and size your widgets with exact pixel
    sizes you can easily do so. To place a widget click it and drag it
    to the desired position. To resize it, click it, and drag one of the
    sizing handles (small blue squares) until the size is right. To stop
    the widget from resizing when the window is resized change the
    hSizeType and vSizeType (these are properties within the sizePolicy
    property), to Fixed.
    </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="PREVIEWING"
>Previewing</A
></H2
><P
>    Although <I
CLASS="EMPHASIS"
>Qt Designer</I
> presents an accurate view of our forms we often want to
    see what a form looks like when it is run. It is also useful to be
    able to test out some aspects of the form, for example how the form
    scales when resized or how the splitters work in practice. If we're
    building cross-platform applications it is also useful to see how
    the form will look in different environments.
    </P
><P
>    To see a preview either click <SPAN
CLASS="GUIMENUITEM"
>Preview|Preview
    Form</SPAN
> or press <B
CLASS="KEYCAP"
>Ctrl+T</B
>. Try this with
    multiclip; when the preview appears try resizing the form and try
    moving the splitter. To leave preview mode press
    <B
CLASS="KEYCAP"
>Esc</B
> or close the window in the standard way for
    your environment. To view previews which show how the application will
    look on other platforms click the <SPAN
CLASS="GUIMENUITEM"
>Preview</SPAN
>
    menu and click one of the menu items that drop down.
    </P
><P
> 
    Preview the multiclip form and try out the splitter and try resizing
    the form. In all probability you moved the splitter to the right to
    reduce the size of the buttons to make the form more attractive. The
    splitter seemed like a good idea but in practice we want the buttons
    and the other widgets on the right hand side to take up a fixed
    amount of space. <I
CLASS="EMPHASIS"
>Qt Designer</I
> makes changing layouts very easy, so we'll fix
    this straight away.
    </P
><P
>    Click the splitter then click the <SPAN
CLASS="GUIBUTTON"
>Break
    Layout</SPAN
> toolbar button; the splitter will be removed. Now
    click the form itself, near the bottom, and drag the rubber band so
    that it touches both the list box and some of the buttons, then
    release. The list box group and the buttons group are
    selected; click the <SPAN
CLASS="GUIBUTTON"
>Lay Out Horizontally</SPAN
>
    toolbar button. Click the form then click the <SPAN
CLASS="GUIBUTTON"
>Lay Out
    Vertically</SPAN
> toolbar button. The form is now laid out as
    we require. Preview the form (press <B
CLASS="KEYCAP"
>Ctrl+T</B
>) and try
    resizing it.
    </P
><P
>    It would be useful if you experimented further with layouts since
    they work visually and are best learnt through practice. 
    To remove a layout click the <SPAN
CLASS="GUIBUTTON"
>Break
    Layout</SPAN
> toolbar button; to apply a layout select the
    relevant widgets or groups and click a layout button. You can
    preview as often as you like and you can always Undo any changes
    that you make. 
    </P
><P
>    We'll try an experiment, to see how the grid layout works. Click
    the list box, then press <B
CLASS="KEYCAP"
>Ctrl+B</B
> (break layout).
    Click one of the buttons and press <B
CLASS="KEYCAP"
>Ctrl+B</B
>. Click
    the form at the bottom and drag until all the widgets are touching
    or within the rubber band, (but excluding the Current
    Clipping label and the currentLineEdit line edit); then release.
    Press <B
CLASS="KEYCAP"
>Ctrl+G</B
> (lay out in a grid). Click the form,
    then click <B
CLASS="KEYCAP"
>Ctrl+L</B
> (lay out vertically). Our
    original design is back -- but this time using a grid layout. 
    </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="CHANGINGTHETABORDER"
>Changing the Tab Order</A
></H2
><P
>    Keyboard users press the <B
CLASS="KEYCAP"
>Tab</B
> key to move the focus
    from widget to widget as they use a form. The order in which the
    focus moves is called the tab order. Preview multiclip (press
    <B
CLASS="KEYCAP"
>Ctrl+T</B
>) and try tabbing through the widgets.
    Because we laid out the widgets in the right order the tab order is
    correct, but we'll experiment with it.
    </P
><P
>    When you click the <SPAN
CLASS="GUIBUTTON"
>Tab Order</SPAN
> toolbar button a
    number in a blue circle will appear next to every widget that can
    accept keyboard focus. You change the tab order by clicking the widgets in
    the order you want to be the new tab order. If you make a mistake
    and need to start again, double click the widget you want to be
    first, then click the other widgets in the required order as before.
    When you've finished press <B
CLASS="KEYCAP"
>Esc</B
> to leave tab order
    mode. If you made a mistake or preferred the previous tab order you
    can undo your changes by leaving tab order and undoing (press
    <B
CLASS="KEYCAP"
>Esc</B
> then <B
CLASS="KEYCAP"
>Ctrl+Z</B
>). 
    </P
><P
>    Click the <SPAN
CLASS="GUIBUTTON"
>Tab Order</SPAN
> toolbar button, then
    click the Add Clipping button. Click the Copy Previous button, the
    Delete Clipping button and the Quit button. Press
    <B
CLASS="KEYCAP"
>Esc</B
> to finish tab order mode, then preview the
    form. The tab order now begins with the Add Clipping button. 
    </P
><P
>    The original tab order was better. We could restore it by undoing,
    but for practice click the <SPAN
CLASS="GUIBUTTON"
>Tab Order</SPAN
> toolbar
    button and restore the original order manually. (Click the line
    edit, the list box then the check box. Press <B
CLASS="KEYCAP"
>Esc</B
>.)
    </P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="addingwidgets.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book1.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="connectingupanapplication.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Adding Widgets</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="c69.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Connecting up an Application</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>