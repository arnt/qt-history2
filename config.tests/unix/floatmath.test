#!/bin/sh

COMPILER=$1
VERBOSE=$2

cat >>floatmath.c << EOF
#include <math.h>
int main(int argc, char **argv)
{
	float c = ceilf(1.3f);
	float f = floorf(1.7f);
	float s = sinf(3.8);
	float t = cosf(7.3);

        if (c == 1.0f && f == 2.0f && s == 3.0f && t == 4.0f)
		return 0;
	else
		return 1;
}
EOF

$COMPILER -o floatmath -lm floatmath.c >/dev/null 2>&1 && FLOATMATH_SUPPORT=yes
rm -f floatmath floatmath.c

# done
if [ "$FLOATMATH_SUPPORT" != "yes" ]; then
    [ "$VERBOSE" = "yes" ] && echo "math.h float functions disabled."
    exit 0
else
    [ "$VERBOSE" = "yes" ] && echo "math.h float functions enabled."
    exit 1
fi
