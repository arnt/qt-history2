#!/bin/sh

PRECOMP_SUPPORT=no
COMPILER=$1
VERBOSE=$2


case `"$COMPILER" --version 2>/dev/null` in
    *3.3*)
        ;;
    *)

        >precomp_header.h
        if $COMPILER -x c-header precomp_header.h >/dev/null 2>&1; then
           $COMPILER -x c++-header precomp_header.h && PRECOMP_SUPPORT=yes
        fi
        rm -f precomp_header.h precomp_header.h.gch
        ;;
esac


# done
if [ "$PRECOMP_SUPPORT" != "yes" ]; then
    [ "$VERBOSE" = "yes" ] && echo "Precompiled-headers support disabled."
    exit 0
else
    [ "$VERBOSE" = "yes" ] && echo "Precompiled-headers support enabled."
    exit 1
fi
