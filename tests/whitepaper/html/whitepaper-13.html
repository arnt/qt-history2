<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- ./collection-classes.leaf:3 -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Collection Classes</title>
</head>
<body>
<p align="right">[<a href="whitepaper-12.html">Prev: Input/Output and Networking</a>] [<a href="whitepaper.html">Home</a>] [<a href="whitepaper-14.html">Next: Plugins and Dynamic Libraries</a>]</p>
<h2 align="center">Collection Classes</h2>
<!-- index STL --><!-- index collection classes --><!-- index containers --><blockquote>
<p>Collection classes are used to store groups of items in memory. Qt provides a set of classes that are compatible with the Standard Template Library (STL), and that work regardless of whether the compiler supports STL or not.</p>
</blockquote>
<p>Applications often need to manage items in memory, for example, groups of images, widgets or custom objects. Many C++ compilers support the STL, which provides read-made data structures for storing items. Qt provides lists, stacks, queues and dictionaries with STL-syntax. Qt's collection classes work with both STL and non-STL compilers.</p>
<!-- index iterators --><!-- index templates --><p>Qt's rich set of portable collection classes ('containers') and associated iterators are heavily used internally, and are provided as part of the Qt API. Qt's containers are optimized for speed and memory efficiency using two techniques, 'private classes' and 'implicit sharing'. Programmers can also use STL containers on the platforms that support them, at the cost of losing Qt's optimizations.</p>
<!-- index bloat problem --><!-- index code bloat problem --><!-- index private classes --><p>Template classes usually increase the size of executables dramatically, because the compiler generates essentially the same code for each specialized type. Qt's template collection classes reduce code bloat because they are a thin layer over non-template private classes.</p>
<h3><a name="1"></a>Value-based Collections</h3>
<!-- index QTL --><!-- index algorithms --><!-- index lists --><!-- index maps --><!-- index stacks --><!-- index value-based collections --><!-- index vectors --><p>Qt provides five value-based collection classes: <font color=darkblue><b>QMap</b></font>&lt;Key,T&gt;, <font color=darkblue><b>QValueList</b></font>&lt;T&gt;, <font color=darkblue><b>QValueStack</b></font>&lt;T&gt;, <font color=darkblue><b>QValueVector</b></font>&lt;T&gt; and <font color=darkblue><b>QStringList</b></font>. They have an interface very similar to the STL containers and are fully compatible with the STL algorithms. Qt provides some STL-equivalent algorithms: <font color=darkblue>qCopy()</font>, <font color=darkblue>qFind()</font>, <font color=darkblue>qHeapSort()</font>, etc. On platforms with STL support, Qt provides automatic conversion operators between STL and Qt containers.</p>
<!-- index copy on write --><!-- index implicit sharing --><!-- index reference counting --><!-- index sharing --><p>Qt's value-based collection classes are implicitly shared, also called 'copy on write'. Copies of instances of these classes share the same data in memory. The data sharing is handled automatically; if the application modifies the contents of one of the copied objects, a deep copy of the data is made so that the other objects are left unchanged. When an object is copied, only a pointer is passed and a reference count incremented, which is much faster than actually copying the data and also saves memory.</p>
<!-- index strings --><p>Implicit sharing is used wherever it makes sense: in Qt's value-based collection classes, and in <font color=darkblue><b>QBitmap</b></font>, <font color=darkblue><b>QBrush</b></font>, <font color=darkblue><b>QCursor</b></font>, <font color=darkblue><b>QFont</b></font>, <font color=darkblue><b>QIconSet</b></font>, <font color=darkblue><b>QPalette</b></font>, <font color=darkblue><b>QPen</b></font>, <font color=darkblue><b>QPicture</b></font>, <font color=darkblue><b>QPixmap</b></font>, <font color=darkblue><b>QRegion</b></font>, <font color=darkblue><b>QRegExp</b></font>, <font color=darkblue><b>QString</b></font>, etc. Programmers can safely and efficiently copy objects of these classes by value, avoiding the risks related to using pointers and hand optimization. In particular, the implicitly shared <font color=darkblue><b>QString</b></font> class makes string processing easy and fast.</p>
<!-- index POD --><!-- index arrays --><!-- index memory arrays --><!-- index plain old data --><p>Qt also provides the low-level <font color=darkblue><b>QMemArray</b></font>&lt;T&gt; class with its subclasses <font color=darkblue><b>QBitArray</b></font>, <font color=darkblue><b>QByteArray</b></font> and <font color=darkblue><b>QPointArray</b></font>. These classes are very efficient for handling basic 'plain old data' types.</p>
<h3><a name="2"></a>Pointer-based Collections</h3>
<!-- index auto-deletion --><!-- index caches --><!-- index delete --><!-- index dictionaries --><!-- index lists --><!-- index ownership --><!-- index pointer-based collections --><!-- index queues --><!-- index stacks --><!-- index vectors --><p>Qt provides many low-level, generic, pointer-based collection classes: <font color=darkblue><b>QDict</b></font>&lt;Key,T&gt;, <font color=darkblue><b>QPtrList</b></font>&lt;T&gt;, <font color=darkblue><b>QPtrQueue</b></font>&lt;T&gt;, <font color=darkblue><b>QPtrStack</b></font>&lt;T&gt;, <font color=darkblue><b>QPtrVector</b></font>&lt;T&gt; and <font color=darkblue><b>QCache</b></font>&lt;T&gt;. These classes store pointers rather than values. They are especially useful for storing pointers to <font color=darkblue><b>QWidget</b></font>s and <font color=darkblue><b>QObject</b></font>s. The pointer-based collection classes can optionally take ownership of the objects they contain and automatically delete them when the collection is destroyed.</p>
<p><hr><ul> <li><a href=http://doc.trolltech.com/3.0/qtl.html>http://doc.trolltech.com/3.0/qtl.html</a> <li><a href=http://doc.trolltech.com/3.0/collections.html>http://doc.trolltech.com/3.0/collections.html</a> <li><a href=http://doc.trolltech.com/3.0/shclass.html>http://doc.trolltech.com/3.0/shclass.html</a> </ul></p>
<!-- eof -->
<p align="right">[<a href="whitepaper-12.html">Prev: Input/Output and Networking</a>] [<a href="whitepaper.html">Home</a>] [<a href="whitepaper-14.html">Next: Plugins and Dynamic Libraries</a>]</p>
</body>
</html>
